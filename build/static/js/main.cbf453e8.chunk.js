(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{125:function(e,t,a){e.exports=a(216)},216:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(26),c=a.n(l),s=a(19),o=a(39),u=a(114),i={},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"login":return t.payload;case"logout":return i;default:return e}},d={msg:""},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"alert":return t.payload;case"reset_alert":return d;default:return e}},f=[],h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"fetch_staff":return t.payload;default:return e}},E=[],v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"fetch_customers":return t.payload;default:return e}},y=[],b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"fetch_inventory":return t.payload;default:return e}},S=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.d,g=[u.a],C=a(7),O=a(8),P=a(10),w=a(9),j=a(11),F=a(31),k=a(106),I=a(32),N=a(115),L=a.n(N)()(),_=a(107),x=Object(s.b)(function(e){return{auth:e.auth}})(function(e){var t=e.Component,a=e.path,n=e.auth;return r.a.createElement(I.a,{path:a,render:function(){return n.token?r.a.createElement(t,null):r.a.createElement(_.a,{to:{pathname:"/"}})}})}),q=a(232),A=a(119),T=a(217),D=a(218),H={logout:"Logout",settings:"Settings",welcomeMsg:"Logged in as: ",btns:{back:"Previous",next:"Next",clear:"Clear",confirm:"Confirm",continue:"Continue",cancel:"Cancel",delete:"Delete",submit:"Submit",updateLvl:"Update Level",updateQty:"Update Quantity",updatePrc:"Update Price",emailInvoice:"Email Invoice",printInvoice:"Print Invoice"},mainNav:{dashboard:"Home",purchase:"Purchases",staff:"Staff",customer:"Customers",inventory:"Inventory"},purchase:{selectCust:"Select a customer",selectProduct:"Select a product",checkOrder:"Check order",completed:"Completed",success:"Success",purMsg:"Purchase has been confirmed",purRefNo:"Purchase reference number: ",ppUnit:"Price per unit",qtyAvail:"Quantity available",required:"Required",ttlPrice:"Total price",price:"price",item:"Item",qty:"Quantity",qtyS:"Qty",qtyQuan:"Total Qty",total:"Total",staffName:"Staff name",customerName:"Customer name",STAGES:["Select Customer","Select Product","Check Order","Completed"]},staff:{staffDetails:"Staff Details",newStaff:"New Staff",LEVEL:["Basic","Junior","Advanced","Admin"],level:"Level",name:"Name",email:"Email",security:"Security level",username:"Username",password:"Password",repassword:"Re-enter password"},customer:{customerDetails:"Customer Details",newCustomer:"New Customer",name:"Name",email:"Email",wechat:"WeChat",phone:"Phone",type:"Customer type",CUSTOMERTYPES:["New","Current","Super","Advanced"],address:"Address",sex:"Sex",male:"Male",female:"Female",dob:"DoB",MONTHS:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},inventory:{inventoryDetails:"Inventory Details",newInventory:"New Inventory",inventoryStatistics:"Inventory Statistics",name:"Product Name",type:"Product type",description:"description",suppDetails:"Suppliers Details",suppName:"Suppliers name",suppAdd:"Suppliers Address",suppPhone:"Suppliers Phone",quantity:"Quantity",changeQuantity:"Change quantity",currentQuantity:"Current quantity",costPrice:"Cost price",retailPrice:"Retail price",profit:"Profit",pricing:"Pricing"},commonInfo:{selected:"Selected: ",rmb:"rmb",date:"Date",time:"Time"},HELP:{name:"Name must contain at least 2 characters",email:"Enter a valid email",username:"Username must contain at least 8 characters",password:"At least 8 characters long. Must contain: 1 uppercase, 1 number, 1 !@#$%^&*",confirmPass:"Password does not match",phone:"Must be 11 numbers",wechat:"Wechat must contain at least 2 characters"},ALERTS:{undefined_err:"Error: undefined",staff_1:"Staff not saved",no_user:"Staff not found",not_active:"Staff not active",password_mismatch:"Password does not match",staff_not_found:"Staff not found",staff_exists:"Member of staff already exists",inven_add_fail:"Inventory not saved",inven_not_found:"Inventory was not found",inventory_not_deleted:"Inventory not deleted",error_code_1:"Error code 1",pur_not_saved:"Purchase not saved",purchase_update_failed:"Purchase update failed",no_record_to_delete:"No purchase to delete",staff_validation:"Validation error",customer_not_found:"Customer not found",customer_not_created:"Customer not created",invalid_search_criteria:"Invalid search criteria",staff_saved:"New staff has been created",unauthorised:"Incorrect Username and/or Password",customer_added:"New customer has been added",exists:"Already exists!",inventory_added:"New inventory has been added",inventory_updated:"New inventory has been updated",purchase_placed:"Purchase has been placed",staff_created:"Staff has been added",level_updated:"Level has been updated",staff_deleted:"Staff member has been deleted",inventory_cost:"Inventory cost has been changed",inventory_quantity:"Inventory quantity has been changed",Purchase_not_placed:"Error placing purchase",email_exists:"Email already exists",username_exists:"Username already exists"}},U=r.a.createContext({logout:"\u767b\u51fa",settings:"\u60c5\u5883",welcomeMsg:"\u4eba\u5458\u662f:",btns:{back:"\u4e0a\u9875",next:"\u4e0b\u9875",clear:"\u62b9\u53bb",confirm:"\u786e\u5b9a",cancel:"",delete:"\u5220\u9664",submit:"Submit",updateLvl:"Update Level",updateQty:"Update Quantity",updatePrc:"Update Price",emailInvoice:"Email Invoice",printInvoice:"Print Invoice"},mainNav:{dashboard:"\u5220\u9664",purchase:"\u62b9\u53bb",staff:"\u4e0a\u9875\u786e\u5b9a",customer:"\u786e\u5b9a",inventory:"\u5220\u9664\u786e\u5b9a"},purchase:{selectCust:"Select a customer",selectProduct:"Select a product",checkOrder:"Check order",completed:"Completed",success:"Success",purMsg:"Purchase has been confirmed",purRefNo:"Purchase reference number: ",ppUnit:"Price per unit",qtyAvail:"Quantity available",required:"Required",ttlPrice:"Total price",price:"price",item:"Item",qty:"Quantity",qtyS:"Qty",qtyQuan:"Total Qty",total:"Total",staffName:"Staff name",customerName:"Customer name"},staff:{staffDetails:"Staff Details",newStaff:"New Staff",LEVEL:["Basic","Junior","Advanced","Admin"],level:"Level",name:"Name",email:"Email",security:"Security level",username:"Username",password:"Password",repassword:"Re-enter password"},customer:{customerDetails:"Customer Details",newCustomer:"New Customer",name:"Name",email:"Email",wechat:"WeChat",phone:"Phone",type:"Customer type",CUSTOMERTYPES:["New","Current","Super","Advanced"],address:"Address",sex:"Sex",male:"Male",female:"Female",dob:"DoB",MONTHS:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},inventory:{inventoryDetails:"Inventory Details",newInventory:"New nventory",inventoryStatistics:"Inventory Statistics",name:"Product Name",type:"Product type",description:"description",suppDetails:"Suppliers Details",suppName:"Suppliers name",suppAdd:"Suppliers Address",suppPhone:"Suppliers Phone",quantity:"Quantity",changeQuantity:"Change quantity",currentQuantity:"Current quantity",costPrice:"Cost price",retailPrice:"Retail price",profit:"Profit",pricing:"Pricing"},commonInfo:{selected:"Selected: ",rmb:"rmb",date:"Date",time:"Time"},HELP:{name:"Name must contain at least 2 characters",email:"Enter a valid email",username:"Username must contain at least 8 characters",password:"At least 8 characters long. Must contain: 1 uppercase, 1 number, 1 !@#$%^&*",confirmPass:"Password does not match",phone:"Must be 11 numbers",wechat:"Wechat must contain at least 2 characters"}}),B=function(e){return function(t){function a(){var e,t;Object(C.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(P.a)(this,(e=Object(w.a)(a)).call.apply(e,[this].concat(r)))).state={language:H},t}return Object(j.a)(a,t),Object(O.a)(a,[{key:"render",value:function(){var t=this;return r.a.createElement(U.Provider,{value:this.state.language},r.a.createElement(U.Consumer,null,function(a){return r.a.createElement(e,Object.assign({},t.props,{locale:a}))}))}}]),a}(n.Component)},Q=B(function(e){var t=e.locale,a=e.logout,n=e.name,l=e.level;return r.a.createElement(q.a,{inverse:!0,collapseOnSelect:!0},r.a.createElement(q.a.Header,null,r.a.createElement(q.a.Brand,null,r.a.createElement("a",{href:"#brand"},"Shop Management")),r.a.createElement(q.a.Toggle,null)),r.a.createElement(q.a.Collapse,null,r.a.createElement(A.a,{pullRight:!0},r.a.createElement(T.a,{eventKey:3,title:"".concat(t.welcomeMsg," ").concat(n," ").concat(t.staff.level,": ").concat(t.staff.LEVEL[l]),id:"basic-nav-dropdown"},r.a.createElement(D.a,{eventKey:3.1},t.settings),r.a.createElement(D.a,{divider:!0}),r.a.createElement(D.a,{eventKey:3.3,onClick:function(){return a()}},t.logout)))))}),z=a(23),M=function(e,t){return function(a){a(K({msg:e,typ:t})),setTimeout(function(){a(R())},1e4)}},K=function(e){return{type:"alert",payload:Object(z.a)({},e)}},R=function(){return{type:"reset_alert"}},V="danger",J=function(e){function t(){return Object(C.a)(this,t),Object(P.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.props.user,t=e.name,a=e.level;return r.a.createElement("div",null,r.a.createElement(Q,{logout:this.props.logout,name:t,level:a}))}}]),t}(r.a.Component),W=Object(s.b)(function(e){return{user:e.auth.staff,token:e.auth.token}},function(e){return{logout:function(){return e(function(e){e({type:"logout"})})}}})(J),Y=a(24),G=a(108),Z=a(193),$=Object(s.b)(function(e){return{staffLevel:e.auth.staff.level}})(function(e){return!0===+e.staffLevel>=+e.level&&e.children}),X=B(function(e){function t(e,a){var n;return Object(C.a)(this,t),(n=Object(P.a)(this,Object(w.a)(t).call(this,e,a))).handleSelect=n.handleSelect.bind(Object(Y.a)(Object(Y.a)(n))),n.state={key:1},n}return Object(j.a)(t,e),Object(O.a)(t,[{key:"handleSelect",value:function(e){this.setState({key:e})}},{key:"render",value:function(){var e=this,t=this.props.locale;return r.a.createElement(A.a,{bsStyle:"tabs",justified:!0,activeKey:this.state.key,onSelect:function(t){return e.handleSelect(t)}},r.a.createElement(G.LinkContainer,{to:"/dashboard"},r.a.createElement(Z.a,{eventKey:1},t.mainNav.dashboard)),r.a.createElement(G.LinkContainer,{to:"/purchase"},r.a.createElement(Z.a,{eventKey:2},t.mainNav.purchase)),r.a.createElement($,{level:3},r.a.createElement(G.LinkContainer,{to:"/staff"},r.a.createElement(Z.a,{eventKey:3},t.mainNav.staff))),r.a.createElement(G.LinkContainer,{to:"/customer"},r.a.createElement(Z.a,{eventKey:4},t.mainNav.customer)),r.a.createElement(G.LinkContainer,{to:"/inventory"},r.a.createElement(Z.a,{eventKey:5},t.mainNav.inventory)))}}]),t}(r.a.Component)),ee=a(219),te=a(220),ae=a(221),ne=a(233),re=a(222),le=a(96),ce=function(e){return!!/^(([^<>().,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},se=function(e){return e.length>1},oe=function(e){return!(!/(^[0-9]{11})/.test(e)||11!==e.length)},ue=function(e){return e.length>7},ie=function(e){return/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#%&])(?=.{8,})/.test(String(e))},me=function(e,t){return e===t},de={username:"",password:"",isUsername:!0,userF:!1,passF:!1,displayBtn:!1},pe=function(e){function t(){var e,a;Object(C.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(a=Object(P.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(l)))).state={username:"",password:"",isUsername:!0,userF:!1,passF:!1,displayBtn:!1},a.validateLocalUsername=function(){if(a.state.userF){a.state.username.length>8&&a.setState({displayBtn:!0});var e=ue(a.state.username);return e&&a.setState({userF:!1,displayBtn:!0}),e?"success":"error"}return null},a.validateLocalPassword=function(){if(a.state.passF){var e=ie(a.state.password);return e&&a.setState({passF:!1}),e?"success":"error"}return null},a.userChange=function(e){a.setState({username:e.target.value},function(){a.setState({displayBtn:ue(a.state.username)})})},a.passChange=function(e){a.setState({password:e.target.value},function(){a.setState({displayBtn:ie(a.state.password)})})},a.displayUsername=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"ShangNaDavid"),r.a.createElement("h2",null,a.props.locale.staff.username),r.a.createElement("form",null,r.a.createElement(ee.a,{controlId:"formHorizontalUsername",validationState:a.validateLocalUsername(),onBlur:function(){return a.setState({userF:!0})}},r.a.createElement(te.a,null,r.a.createElement(ae.a,{sm:4},r.a.createElement(ne.a,{type:"Username",placeholder:a.props.locale.staff.username,value:a.state.username,onChange:function(e){return a.userChange(e)}}),a.state.userF&&r.a.createElement(re.a,null,a.props.locale.HELP.username))))))},a.displayPassword=function(){return r.a.createElement("div",null,r.a.createElement("h2",null,a.props.locale.staff.password),r.a.createElement("form",null,r.a.createElement(ee.a,{controlId:"formHorizontalPassword",validationState:a.validateLocalPassword(),onBlur:function(){return a.setState({passF:!0})}},r.a.createElement(te.a,null,r.a.createElement(ae.a,{sm:4},r.a.createElement(ne.a,{type:"Password",placeholder:a.props.locale.staff.password,value:a.state.password,onChange:function(e){return a.passChange(e)}}),a.state.passF&&r.a.createElement(re.a,null,a.props.locale.HELP.password))))))},a.btnOnClick=function(){a.state.isUsername?a.setState({isUsername:!1,displayBtn:!1,userF:!1,passF:!1}):a.props.startLogin(a.state.username,a.state.password)},a.cancel=function(){a.setState(Object(z.a)({},de))},a}return Object(j.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement(te.a,null,this.state.isUsername?this.displayUsername():this.displayPassword(),this.state.displayBtn&&r.a.createElement("div",null,r.a.createElement(te.a,null,r.a.createElement(ae.a,{sm:4},r.a.createElement(le.a,{bsStyle:"info",onClick:function(){e.btnOnClick()},block:!0},"Next"))))),r.a.createElement(te.a,null,r.a.createElement(ae.a,{sm:4},r.a.createElement("br",null),r.a.createElement(le.a,{bsStyle:"warning",onClick:function(){e.cancel()},block:!0},"Cancel"))))}}]),t}(r.a.Component),fe=Object(s.b)(void 0,function(e){return{startLogin:function(t,a){return e(function(e,t){return function(a){fetch("/login",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},crossdomain:!0,body:JSON.stringify({username:e,password:t})}).then(function(e){if(401!==e.status)return e;a(M("unauthorised",V)),L.replace("/")}).then(function(e){return e.json()}).then(function(e){a({type:"login",payload:e})}).then(function(){return L.replace("/dashboard")}).catch(function(e){})}}(t,a))}}})(B(pe)),he=Object(s.b)(function(e){return{token:e.auth.token}})(function(e){return r.a.createElement("div",null,e.token&&e.children)}),Ee=function(){return r.a.createElement("div",null,"A Message from the dashboard")},ve=a(236),ye=function(e){function t(){var e,a;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(P.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).findMsg=function(e){return a.props.locale.ALERTS.filter(function(t){return t===e})},a}return Object(j.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.props.alert,t=e.msg,a=e.typ,n=this.props.locale;return r.a.createElement("div",null,t&&r.a.createElement(ve.a,{bsStyle:a},r.a.createElement("p",null,n.ALERTS[t])))}}]),t}(r.a.Component),be=Object(s.b)(function(e){return{alert:e.alert}})(B(ye)),Se=function(){return r.a.createElement("div",null,r.a.createElement(ve.a,{bsStyle:"info"},r.a.createElement("h2",null,"DEVELOPMENT")))},ge=a(227),Ce=a(234),Oe=a(223),Pe=a(224),we=a(225),je=a(226),Fe=a(235),ke={name:"",level:0,username:"",email:"",password:"",password2:"",nameF:!1,emailF:!1,userF:!1,passF:!1,passC:!1,levelF:!0},Ie=B(function(e){function t(){var e,a;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(P.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",level:0,username:"",email:"",password:"",password2:"",nameF:!1,emailF:!1,userF:!1,passF:!1,passC:!1},a.onSubmit=function(e){e.preventDefault();var t=a.state,n=t.name,r=t.level,l=t.username,c=t.email,s=t.password;a.fullValidation()?a.props.onSubmit({name:n,level:r,username:l,email:c,password:s}):alert("Fix your mistakes!")},a.fullValidation=function(){return!!(se(a.state.name)&&ce(a.state.email)&&ue(a.state.username)&&ie(a.state.password))},a.validateLocalName=function(){return a.state.nameF?se(a.state.name)?"success":"error":null},a.validateLocalEmail=function(){if(a.state.emailF){var e=ce(a.state.email);return e&&a.setState({emailF:!1}),e?"success":"error"}return null},a.validateLocalUsername=function(){if(a.state.userF){var e=ue(a.state.username);return e&&a.setState({userF:!1}),e?"success":"error"}return null},a.validateLocalPassword=function(){if(a.state.passF){var e=ie(a.state.password);return e&&a.setState({passF:!1}),e?"success":"error"}return null},a.confirmLocalPassword=function(){var e=a.state,t=e.password,n=e.password2;if(a.state.passC&&0===n.length)return"error";if(a.state.passC){var r=me(t,n);return r&&a.setState({passC:!1}),r?"success":"error"}return null},a.clear=function(){a.setState(Object(z.a)({},ke))},a}return Object(j.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this,t=this.props.locale;return r.a.createElement("div",null,r.a.createElement(Oe.a,{horizontal:!0,onSubmit:function(t){return e.onSubmit(t)}},r.a.createElement(ee.a,{controlId:"formHorizontalName",validationState:this.validateLocalName(),onBlur:function(){return e.setState({nameF:!0})},onFocus:function(){return e.setState({nameF:!1})}},r.a.createElement(ae.a,{componentClass:Pe.a,sm:2},t.staff.name),r.a.createElement(ae.a,{sm:4},r.a.createElement(ne.a,{type:"Text",placeholder:t.staff.name,value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}}),this.state.nameF&&r.a.createElement(re.a,null,t.HELP.name))),r.a.createElement(ee.a,null,r.a.createElement(te.a,null,r.a.createElement(ae.a,{xs:2,smOffset:2},r.a.createElement(we.a,null,r.a.createElement(je.a,{componentClass:Fe.a.Button,id:"input-dropdown-addon",title:"Security Level",key:this.state.level,onSelect:function(t){return e.setState({level:t})}},t.staff.LEVEL.map(function(e,t){return r.a.createElement(D.a,{eventKey:t,active:!0},e)})))),r.a.createElement(ae.a,{xs:4,xsOffset:2,smOffset:0},r.a.createElement("h5",null,"".concat(t.commonInfo.selected," ").concat(t.staff.LEVEL[parseInt(this.state.level)]))))),r.a.createElement(ee.a,{controlId:"formHorizontalEmail",validationState:this.validateLocalEmail(),onBlur:function(){return e.setState({emailF:!0})}},r.a.createElement(ae.a,{componentClass:Pe.a,sm:2},t.staff.email),r.a.createElement(ae.a,{sm:4},r.a.createElement(ne.a,{type:"Email",placeholder:t.staff.email,value:this.state.email,onChange:function(t){return e.setState({email:t.target.value})}}),this.state.emailF&&r.a.createElement(re.a,null,t.HELP.email))),r.a.createElement(ee.a,{controlId:"formHorizontalUsername",validationState:this.validateLocalUsername(),onBlur:function(){return e.setState({userF:!0})}},r.a.createElement(ae.a,{componentClass:Pe.a,sm:2},t.staff.username),r.a.createElement(ae.a,{sm:4},r.a.createElement(ne.a,{type:"Username",placeholder:t.staff.username,value:this.state.username,onChange:function(t){return e.setState({username:t.target.value})}}),this.state.userF&&r.a.createElement(re.a,null,t.HELP.username))),r.a.createElement(ee.a,{controlId:"formHorizontalPassword",validationState:this.validateLocalPassword(),onBlur:function(){return e.setState({passF:!0})}},r.a.createElement(ae.a,{componentClass:Pe.a,sm:2},t.staff.password),r.a.createElement(ae.a,{sm:4},r.a.createElement(ne.a,{type:"Password",placeholder:t.staff.password,value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})}}),this.state.passF&&r.a.createElement(re.a,null,t.HELP.password))),r.a.createElement(ee.a,{controlId:"formHorizontalConfirmPassword",validationState:this.confirmLocalPassword(),onBlur:function(){return e.setState({passC:!0})}},r.a.createElement(ae.a,{componentClass:Pe.a,sm:2},t.staff.repassword),r.a.createElement(ae.a,{sm:4},r.a.createElement(ne.a,{type:"Password",placeholder:t.staff.repassword,value:this.state.password2,onChange:function(t){return e.setState({password2:t.target.value})}}),this.state.passC&&r.a.createElement(re.a,null,t.HELP.confirmPass))),r.a.createElement(ee.a,null,r.a.createElement(te.a,null,r.a.createElement(ae.a,{smOffset:2,sm:2},r.a.createElement(le.a,{type:"submit",bsStyle:"success",block:!0},t.btns.submit)),r.a.createElement(ae.a,{sm:2},r.a.createElement(le.a,{bsStyle:"warning",onClick:function(){return e.clear()},block:!0},t.btns.clear))))))}}]),t}(r.a.Component)),Ne=a(231),Le=B(function(e){var t=e.staff,a=e.locale;return r.a.createElement("div",null,r.a.createElement(Ne.a,{bsStyle:"primary"},r.a.createElement(Ne.a.Heading,null,t.name),r.a.createElement(Ne.a.Body,null,"".concat(a.staff.level,": ").concat(a.staff.LEVEL[t.level])),r.a.createElement(Ne.a.Body,null,"".concat(a.staff.email,": ").concat(t.email))))}),_e=B(function(e){function t(){var e,a;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(P.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={name:a.props.staff.name,level:+a.props.staff.level},a}return Object(j.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.staff,n=t.onUpdateLevel,l=t.deleteStaff,c=t.locale,s=t.userName,o=this.state.level,u=+a.level;return r.a.createElement("div",null,r.a.createElement(te.a,null,r.a.createElement(ae.a,{sm:5},r.a.createElement(Le,{staff:a}))),r.a.createElement(te.a,null,r.a.createElement(ae.a,{sm:5},r.a.createElement(Fe.a,null,r.a.createElement(je.a,{componentClass:Fe.a.Button,id:"input-dropdown-addon",title:"Update Security Level",eventKey:o,onSelect:function(t){return e.setState({level:+t})},block:!0},c.staff.LEVEL.map(function(e,t){return r.a.createElement(D.a,{eventKey:t,key:t,active:t===o},e)}))))),r.a.createElement(te.a,null,r.a.createElement(ae.a,{sm:5},s!==a.name&&r.a.createElement(le.a,{bsStyle:"success",disabled:o===u&&!0,onClick:function(){return n(o)},block:!0}," ",o===u?c.staff.LEVEL[o]:"".concat(c.btns.updateLvl," ").concat(c.staff.LEVEL[o])),s!==a.name&&r.a.createElement(le.a,{bsStyle:"danger",onClick:function(){return l()}},c.btns.delete))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.name!==e.staff.name?{level:+e.staff.level,name:e.staff.name}:t}}]),t}(r.a.Component)),xe=B(function(e){function t(e){var a;return Object(C.a)(this,t),(a=Object(P.a)(this,Object(w.a)(t).call(this,e))).handleSelect=a.handleSelect.bind(Object(Y.a)(Object(Y.a)(a))),a.state={key:1},a}return Object(j.a)(t,e),Object(O.a)(t,[{key:"handleSelect",value:function(e){this.setState({key:e})}},{key:"render",value:function(){var e=this.props,t=e.staff,a=e.locale;return r.a.createElement(ge.a,{eventKey:this.state.key,onSelect:this.handleSelect,id:"controlled-tab-example"},r.a.createElement(Ce.a,{eventKey:1,title:a.staff.staffDetails},null!=t&&r.a.createElement(_e,this.props)),r.a.createElement(Ce.a,{eventKey:2,title:a.staff.newStaff},r.a.createElement($,{level:3},r.a.createElement(Ie,{onSubmit:this.props.onSubmit}))))}}]),t}(r.a.Component)),qe=function(e){var t=e.name,a=e.getStaff,n=e.id,l=e.iselected;return r.a.createElement("div",{onClick:function(e){return a(n)}},r.a.createElement(Ne.a,{bsStyle:l?"success":"info"},r.a.createElement(Ne.a.Heading,null,t)))},Ae=a(123),Te=a.n(Ae),De=function(){return function(e,t){return Te()({method:"get",url:"/staff/all",headers:{authorization:t().auth.token}}).then(function(e){console.log(e)}).catch(function(e){console.log(e)})}},He=function(e){function t(){var e,a;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(P.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={allStaff:[],selectedStaff:""},a.getStaff=function(e){var t=a.state.allStaff.filter(function(t){return t._id===e});a.setState({selectedStaff:t[0]})},a.isSelected=function(e){return null!=a.state.selectedStaff&&e===a.state.selectedStaff._id},a.onSubmit=function(e){a.props.createStaff(e)},a.onUpdateLevel=function(e){a.props.updateLevel(a.state.selectedStaff._id,e)},a.deleteStaff=function(){a.props.deleteStaffMember(a.state.selectedStaff._id)},a}return Object(j.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){this.props.allStaff()}},{key:"render",value:function(){var e=this,t=this.state.allStaff;return r.a.createElement("div",null,r.a.createElement(ae.a,{sm:2},t.length>0&&t.map(function(t){return r.a.createElement(qe,{name:t.name,getStaff:e.getStaff,id:t._id,key:t._id,iselected:e.isSelected(t._id)})})),r.a.createElement(ae.a,{sm:10},r.a.createElement(xe,{userName:this.props.name,staff:this.state.selectedStaff,deleteStaff:this.deleteStaff,onSubmit:this.onSubmit,onUpdateLevel:this.onUpdateLevel})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.staff!==t.allStaff?{allStaff:e.staff,selectedStaff:e.staff[0]}:t}}]),t}(r.a.Component),Ue=Object(s.b)(function(e){return{name:e.auth.staff.name,staff:e.staff}},function(e){return{allStaff:function(){return e(De())},createStaff:function(t){return e(function(e){return console.log("in createStaff"),function(t,a){return console.log("just before signup"),fetch("/signup",{method:"POST",credentials:"include",mode:"cors",headers:{"Content-Type":"application/json",authorization:a().auth.token},body:JSON.stringify(e)}).then(function(e){return console.log(e.json())}).then(function(e){return e.json()}).then(function(e){e.err?e.err.errmsg?t(M(e.err.errmsg,V)):t(M(e.err,V)):(t(M("staff_created","success")),t(De()))}).catch(function(e){t(M(e.errmsg,V))})}}(t))},updateLevel:function(t,a){return e(function(e,t){return function(a,n){return fetch("/staff",{method:"PUT",credentials:"include",mode:"cors",headers:{"Content-Type":"application/json",authorization:n().auth.token},body:JSON.stringify({id:e,data:{level:t}})}).then(function(e){return e.json()}).then(function(e){e.err?a(M(e.err,V)):(a(M("level_updated","success")),a(De()))}).catch(function(e){return a(M(e.errmsg,V))})}}(t,a))},deleteStaffMember:function(t){return e(function(e){return function(t,a){return fetch("/staff",{method:"DELETE",credentials:"include",mode:"cors",headers:{"Content-Type":"application/json",authorization:a().auth.token},body:JSON.stringify({id:e})}).then(function(e){return e.json()}).then(function(e){e.err?t(M(e.err,V)):(t(M("staff_deleted","success")),t(De()))}).catch(function(e){return t(M(e.errmsg,V))})}}(t))}}})(He),Be=a(228),Qe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ze={name:"",email:"",phone:"",wechat:"",dob:"",sex:!0,address:"",type:0,day:1,month:0,year:1945,nameF:!1,emailF:!1,phoneF:!1,wechatF:!1,addF:!1},Me=B(function(e){function t(){var e,a;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(P.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",email:"",phone:"",wechat:"",dob:"",sex:!0,address:"",type:0,day:1,month:0,year:1945,nameF:!1,emailF:!1,phoneF:!1,wechatF:!1,addF:!1},a.onSubmit=function(e){e.preventDefault();var t=a.state,n=t.name,r=t.email,l=t.phone,c=t.wechat,s=t.type,o=t.sex,u=t.address,i=t.day,m=t.month,d=t.year;if(a.fullValidation()){var p=new Date(d,m,i);a.props.onSubmit({name:n,email:r,phone:l,wechat:c,type:s,dob:p,sex:o,address:u})}else alert("Fix your mistakes!")},a.fullValidation=function(){return!!(se(a.state.name)&&se(a.state.wechat)&&ce(a.state.email)&&oe(a.state.phone))},a.validateLocalName=function(){if(a.state.nameF){var e=se(a.state.name);return e&&a.setState({nameF:!1}),e?"success":"error"}return null},a.validateLocalWechat=function(){if(a.state.wechatF){var e=se(a.state.wechat);return e&&a.setState({wechatF:!1}),e?"success":"error"}return null},a.validateLocalEmail=function(){if(a.state.emailF){var e=ce(a.state.email);return e&&a.setState({emailF:!1}),e?"success":"error"}return null},a.validateLocalAddress=function(){if(a.state.addF){var e=ue(a.state.address);return e&&a.setState({addF:!1}),e?"success":"error"}return null},a.validateLocalPhone=function(){if(a.state.phoneF){var e=oe(a.state.phone);return e&&a.setState({phoneF:!1}),e?"success":"error"}return null},a.clear=function(){a.setState(Object(z.a)({},ze))},a.calculateDays=function(){var e=a.state.month,t=0;t=[3,5,8,10].includes(e)?30:[0,2,4,6,7,9,11].includes(e)?31:28;for(var n=[],r=0;r<t;r++)n.push(r);return n},a.createYears=function(){for(var e=[],t=(new Date).getFullYear(),a=1945;a<t+1;a++)e.push(a);return e},a}return Object(j.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this,t=this.calculateDays(),a=this.createYears(),n=this.props.locale;return r.a.createElement("div",null,r.a.createElement(Oe.a,{horizontal:!0,onSubmit:function(t){return e.onSubmit(t)}},r.a.createElement(te.a,null,r.a.createElement(ae.a,{xs:6},r.a.createElement(ee.a,{controlId:"formHorizontalName",validationState:this.validateLocalName(),onBlur:function(){return e.setState({nameF:!0})},onFocus:function(){return e.setState({nameF:!1})}},r.a.createElement(ae.a,{componentClass:Pe.a,sm:2},n.customer.name),r.a.createElement(ae.a,{sm:6},r.a.createElement(ne.a,{type:"Text",placeholder:n.customer.name,value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}}),this.state.nameF&&r.a.createElement(re.a,null,n.HELP.name))),r.a.createElement(ee.a,{controlId:"formHorizontalEmail",validationState:this.validateLocalEmail(),onBlur:function(){return e.setState({emailF:!0})}},r.a.createElement(ae.a,{componentClass:Pe.a,sm:2},n.customer.email),r.a.createElement(ae.a,{sm:6},r.a.createElement(ne.a,{type:"Email",placeholder:n.customer.email,value:this.state.email,onChange:function(t){return e.setState({email:t.target.value})}}),this.state.emailF&&r.a.createElement(re.a,null,n.HELP.email))),r.a.createElement(ee.a,{controlId:"formHorizontalPhone",validationState:this.validateLocalPhone(),onBlur:function(){return e.setState({phoneF:!0})},onFocus:function(){return e.setState({phoneF:!1})}},r.a.createElement(ae.a,{componentClass:Pe.a,sm:2},n.customer.phone),r.a.createElement(ae.a,{sm:6},r.a.createElement(ne.a,{type:"Number",placeholder:n.customer.phone,value:this.state.phone,onChange:function(t){return e.setState({phone:t.target.value})}}),this.state.phoneF&&r.a.createElement(re.a,null,n.HELP.phone))),r.a.createElement(ee.a,{controlId:"formHorizontalWechat",validationState:this.validateLocalWechat(),onBlur:function(){return e.setState({wechatF:!0})},onFocus:function(){return e.setState({wechatF:!1})}},r.a.createElement(ae.a,{componentClass:Pe.a,sm:2},n.customer.wechat),r.a.createElement(ae.a,{sm:6},r.a.createElement(ne.a,{type:"Text",placeholder:n.customer.wechat,value:this.state.wechat,onChange:function(t){return e.setState({wechat:t.target.value})}}),this.state.wechatF&&r.a.createElement(re.a,null,n.HELP.wechat))),r.a.createElement(ee.a,null,r.a.createElement(te.a,null,r.a.createElement(ae.a,{xs:4,smOffset:1},r.a.createElement(ne.a,{componentClass:"select",placeholder:"select",onChange:function(t){return e.setState({type:t.target.value})}},n.customer.CUSTOMERTYPES.map(function(e,t){return r.a.createElement("option",{value:t,key:t},e)}))),r.a.createElement(ae.a,{xs:4,xsOffset:1,smOffset:1},r.a.createElement("h5",null,"Selected ".concat(n.customer.CUSTOMERTYPES[parseInt(this.state.type)])))))),r.a.createElement(ae.a,{xs:6},r.a.createElement(ee.a,{controlId:"formHorizontalAddress",validationState:this.validateLocalAddress(),onBlur:function(){return e.setState({addF:!0})},onFocus:function(){return e.setState({addF:!1})}},r.a.createElement(ae.a,{componentClass:Pe.a,sm:2},n.customer.address),r.a.createElement(ae.a,{sm:6},r.a.createElement(ne.a,{type:"Text",placeholder:n.customer.address,value:this.state.address,onChange:function(t){return e.setState({address:t.target.value})}}),this.state.addF&&r.a.createElement(re.a,null,n.HELP.username))),r.a.createElement(ee.a,{controlId:"formHorizontalSex"},r.a.createElement(ae.a,{componentClass:Pe.a,sm:2},"Sex"),r.a.createElement(ae.a,{sm:6},r.a.createElement(Be.a,{name:"radioGroup",defaultChecked:!0,inline:!0,onChange:function(t){return e.setState({sex:!0})}},n.customer.male)," ",r.a.createElement(Be.a,{name:"radioGroup",inline:!0,onChange:function(t){return e.setState({sex:!1})}},n.customer.female)," ")),r.a.createElement(ee.a,null,r.a.createElement(te.a,null,r.a.createElement(ae.a,{componentClass:Pe.a,sm:2},"DoB"),r.a.createElement(ae.a,{xs:3},r.a.createElement(ne.a,{componentClass:"select",placeholder:"select",onChange:function(t){return e.setState({month:t.target.value})}},Qe.map(function(e,t){return r.a.createElement("option",{value:t,key:t},e)}))),r.a.createElement(ae.a,{xs:3},r.a.createElement(ne.a,{componentClass:"select",placeholder:"select",onChange:function(t){return e.setState({day:t.target.value+1})}},t.map(function(e,t){return r.a.createElement("option",{value:t,key:t},e+1)}))),r.a.createElement(ae.a,{xs:3},r.a.createElement(ne.a,{componentClass:"select",placeholder:"select",onChange:function(t){return e.setState({year:t.target.value})}},a.map(function(e,t){return r.a.createElement("option",{value:e,key:t},e)}))))))),r.a.createElement(te.a,null,r.a.createElement(ae.a,{xs:12},r.a.createElement(ee.a,null,r.a.createElement(te.a,null,r.a.createElement(ae.a,{smOffset:2,sm:4},r.a.createElement(le.a,{type:"submit",bsStyle:"success",block:!0},n.btns.submit)),r.a.createElement(ae.a,{sm:4},r.a.createElement(le.a,{bsStyle:"warning",onClick:function(){return e.clear()},block:!0},n.btns.clear))))))))}}]),t}(r.a.Component)),Ke=B(function(e){var t=e.customer,a=e.locale;return r.a.createElement("div",null,r.a.createElement(Ne.a,{bsStyle:"primary"},r.a.createElement(Ne.a.Heading,null,t.name),r.a.createElement(Ne.a.Body,null,"".concat(a.customer.phone,": ").concat(t.phone)),r.a.createElement(Ne.a.Body,null,"".concat(a.customer.wechat,": ").concat(t.wechat)),r.a.createElement(Ne.a.Body,null,"".concat(a.customer.email,": ").concat(t.email)),r.a.createElement(Ne.a.Body,null,"".concat(a.customer.type,": ").concat(a.customer.CUSTOMERTYPES[t.customerType]))))}),Re=function(e){function t(){var e,a;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(P.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={name:a.props.customer.name},a}return Object(j.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.props.customer;return r.a.createElement("div",null,r.a.createElement(te.a,null,r.a.createElement(ae.a,{sm:5},r.a.createElement(Ke,{customer:e}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.name!==e.customer.name?{name:e.customer.name}:t}}]),t}(r.a.Component),Ve=B(function(e){function t(e,a){var n;return Object(C.a)(this,t),(n=Object(P.a)(this,Object(w.a)(t).call(this,e,a))).handleSelect=n.handleSelect.bind(Object(Y.a)(Object(Y.a)(n))),n.state={key:0},n}return Object(j.a)(t,e),Object(O.a)(t,[{key:"handleSelect",value:function(e){this.setState({key:e})}},{key:"render",value:function(){var e=this.props,t=e.customer,a=e.locale;return r.a.createElement(ge.a,{eventKey:this.state.key,onSelect:this.handleSelect,id:"controlled-tab-example"},r.a.createElement(Ce.a,{eventKey:1,title:a.customer.customerDetails},null!=t&&r.a.createElement(Re,this.props)),r.a.createElement(Ce.a,{eventKey:2,title:a.customer.newCustomer},r.a.createElement($,{level:3},r.a.createElement(Me,{onSubmit:this.props.onSubmit}))))}}]),t}(r.a.Component)),Je=function(){return function(e,t){return fetch("/customer/all",{headers:{authorization:t().auth.token}}).then(function(e){return e.json()}).then(function(t){t.err?t.err.errmsg?e(M(t.err.errmsg,V)):e(M(t.err,V)):e({type:"fetch_customers",payload:t})}).catch(function(t){return e(M(t.errmsg,V))})}},We=function(e){function t(){var e,a;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(P.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={allCust:[],selectedCust:""},a.getStaff=function(e){var t=a.state.allCust.filter(function(t){return t._id===e});a.setState({selectedCust:t[0]})},a.isSelected=function(e){return null!=a.state.selectedCust&&e===a.state.selectedCust._id},a.onSubmit=function(e){a.props.createCustomer(e,a.props.token)},a.onUpdate=function(e){alert("Customer ".concat(a.state.selectedCust.name," level will be updated to ").concat(e))},a.deleteCustomer=function(){alert("Will delete ".concat(a.state.selectedCust.name))},a}return Object(j.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchCustomers()}},{key:"render",value:function(){var e=this,t=this.state.allCust;return r.a.createElement("div",null,r.a.createElement(ae.a,{sm:2},t.length>0&&t.map(function(t){return r.a.createElement(qe,{name:t.name,getStaff:e.getStaff,id:t._id,key:t._id,iselected:e.isSelected(t._id)})})),r.a.createElement(ae.a,{sm:10},r.a.createElement(Ve,{customer:this.state.selectedCust,deleteCustomer:this.deleteCustomer,onSubmit:this.onSubmit,onUpdate:this.onUpdate})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.customers!==t.allCust){var a=e.customers.length;return{allCust:e.customers,selectedCust:a>0?e.customers[0]:""}}return t}}]),t}(r.a.Component),Ye=Object(s.b)(function(e){return{customers:e.customers}},function(e){return{fetchCustomers:function(){return e(Je())},createCustomer:function(t){return e(function(e){return function(t,a){return fetch("/customer",{method:"POST",credentials:"include",mode:"cors",headers:{"Content-Type":"application/json",authorization:a().auth.token},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){e.err?e.err.errmsg?t(M(e.err.errmsg,V)):t(M(e.err,V)):(t(Je()),t(M("customer_added","success")))}).catch(function(e){})}}(t))}}})(We),Ge=B(function(e){var t=e.inventory,a=t.productType,n=t.name,l=t.description,c=t.quantity,s=t.retailPrice,o=e.locale;return r.a.createElement("div",null,r.a.createElement(ae.a,null,r.a.createElement(Ne.a,{bsStyle:"info"},r.a.createElement(Ne.a.Heading,null,r.a.createElement("b",null,n)),r.a.createElement(Ne.a.Body,null,r.a.createElement(te.a,null,r.a.createElement(ae.a,{md:4},o.inventory.type),r.a.createElement(ae.a,{md:8},a)),r.a.createElement(te.a,null,r.a.createElement("hr",null),r.a.createElement(ae.a,{md:4},o.inventory.description),r.a.createElement(ae.a,{md:8},l)),r.a.createElement(te.a,null,r.a.createElement("hr",null),r.a.createElement(ae.a,{md:4},o.inventory.quantity),r.a.createElement(ae.a,{md:8},c)),r.a.createElement(te.a,null,r.a.createElement("hr",null),r.a.createElement(ae.a,{md:4},o.inventory.retailPrice),r.a.createElement(ae.a,{md:8},s," ",o.commonInfo.rmb))))))}),Ze=B(function(e){function t(){var e,a;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(P.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={newPrice:0},a}return Object(j.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.inventory,n=t.changePrice,l=t.locale,c=a.costPrice,s=a.retailPrice;return r.a.createElement("div",null,r.a.createElement(ae.a,null,r.a.createElement(Ne.a,{bsStyle:"info"},r.a.createElement(Ne.a.Heading,null,r.a.createElement("b",null,l.inventory.pricing)),r.a.createElement(Ne.a.Body,null,r.a.createElement($,{level:3},r.a.createElement(te.a,null,r.a.createElement(ae.a,{md:4},l.inventory.costPrice,":"),r.a.createElement(ae.a,{md:8},c," rmb"),r.a.createElement("hr",null))),r.a.createElement(te.a,null,r.a.createElement(ae.a,{md:4},l.inventory.retailPrice,":"),r.a.createElement(ae.a,{md:4},s," ",l.commonInfo.rmb),r.a.createElement(ae.a,{md:4},r.a.createElement(ee.a,{controlId:"formHorizontalName"},r.a.createElement(ne.a,{type:"Number",placeholder:this.state.newPrice,onChange:function(t){return e.setState({newPrice:t.target.value})}}),r.a.createElement(le.a,{type:"submit",bsStyle:"success",block:!0,onClick:function(){return n(e.state.newPrice)}},l.btns.updatePrc))),r.a.createElement("hr",null)),r.a.createElement($,{level:3},r.a.createElement(te.a,null,r.a.createElement(ae.a,{md:4},l.inventory.profit,":"),r.a.createElement(ae.a,{md:8},s-c," ",l.commonInfo.rmb)))))))}}]),t}(r.a.Component)),$e=B(function(e){function t(){var e,a;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(P.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={newQty:1},a}return Object(j.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.inventory,n=t.changeQuantity,l=t.locale,c=a.quantity;return r.a.createElement(ae.a,null,r.a.createElement(Ne.a,{bsStyle:function(e){return 0===e?"danger":e<10?"warning":"success"}(c)},r.a.createElement(Ne.a.Heading,null,r.a.createElement("b",null,l.inventory.changeQuantity,":")),r.a.createElement(Ne.a.Body,null,r.a.createElement(te.a,null,r.a.createElement(ae.a,{md:4},l.inventory.currentQuantity,":"),r.a.createElement(ae.a,{md:4},c),r.a.createElement(ae.a,{md:4},r.a.createElement(ee.a,{controlId:"formHorizontalQty"},r.a.createElement(ne.a,{type:"Number",placeholder:this.state.newQty,onChange:function(t){return e.setState({newQty:t.target.value})}}),r.a.createElement(le.a,{type:"submit",bsStyle:"success",block:!0,onClick:function(){return n(e.state.newQty)}},l.btns.updateQty)))))))}}]),t}(r.a.Component)),Xe=B(function(e){var t=e.inventory,a=t.supplierName,n=t.supplierAddress,l=t.supplierPhone,c=e.locale;return r.a.createElement("div",null,r.a.createElement(ae.a,null,r.a.createElement(Ne.a,{bsStyle:"info"},r.a.createElement(Ne.a.Heading,null,r.a.createElement("b",null,c.inventory.suppDetails)),r.a.createElement(Ne.a.Body,null,r.a.createElement(te.a,null,r.a.createElement(ae.a,{md:4},c.inventory.suppName,":"),r.a.createElement(ae.a,{md:8},a)),r.a.createElement(te.a,null,r.a.createElement("hr",null),r.a.createElement(ae.a,{md:4},c.inventory.suppPhone,":"),r.a.createElement(ae.a,{md:8},l)),r.a.createElement(te.a,null,r.a.createElement("hr",null),r.a.createElement(ae.a,{md:4},c.inventory.suppAdd,":"),r.a.createElement(ae.a,{md:8},n))))))}),et={name:"",type:"",description:"",supplierName:"",supplierPhone:"",supplierAddress:"",quantity:1,costPrice:1,retailPrice:2,nameF:!1,typeF:!1,descF:!1,supNF:!1,supPF:!1,supAF:!1},tt=B(function(e){function t(){var e,a;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(P.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",productType:"",description:"",supplierName:"",supplierPhone:"",supplierAddress:"",quantity:1,costPrice:1,retailPrice:2,nameF:!1,typeF:!1,descF:!1,supNF:!1,supPF:!1,supAF:!1},a.validateLocalName=function(){if(a.state.nameF){var e=se(a.state.name);return e&&a.setState({nameF:!1}),e?"success":"error"}return null},a.validateLocalType=function(){if(a.state.typeF){var e=se(a.state.productType);return e&&a.setState({typeF:!1}),e?"success":"error"}return null},a.validateLocalSName=function(){if(a.state.supNF){var e=se(a.state.supplierName);return e&&a.setState({supNF:!1}),e?"success":"error"}return null},a.validateLocalSNumber=function(){if(a.state.supPF){var e=oe(a.state.supplierPhone);return e&&a.setState({supPF:!1}),e?"success":"error"}return null},a.validateLocalSAddress=function(){if(a.state.supAF){var e=se(a.state.supplierAddress);return e&&a.setState({supAF:!1}),e?"success":"error"}return null},a.clear=function(){return a.setState(Object(z.a)({},et))},a.onSubmit=function(e){e.preventDefault();var t=a.state,n=t.name,r=t.productType,l=t.description,c=t.supplierName,s=t.supplierPhone,o=t.supplierAddress,u=t.quantity,i=t.costPrice,m=t.retailPrice;a.fullValidation()?a.props.onSubmit({name:n,productType:r,description:l,supplierName:c,supplierPhone:s,supplierAddress:o,quantity:u,costPrice:i,retailPrice:m}):alert("Fix your mistakes!")},a.fullValidation=function(){return!!(se(a.state.name)&&se(a.state.productType)&&se(a.state.supplierName)&&oe(a.state.supplierPhone)&&se(a.state.supplierAddress))},a}return Object(j.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this,t=this.props.locale;return r.a.createElement("div",null,r.a.createElement("hr",null),r.a.createElement(Oe.a,{horizontal:!0,onSubmit:function(t){return e.onSubmit(t)}},r.a.createElement(te.a,null,r.a.createElement(ae.a,{xs:4},r.a.createElement(ee.a,{controlId:"formHorizontalName",validationState:this.validateLocalName(),onBlur:function(){return e.setState({nameF:!0})},onFocus:function(){return e.setState({nameF:!1})}},r.a.createElement(ae.a,{componentClass:Pe.a,xs:4},t.inventory.name),r.a.createElement(ae.a,{xs:8},r.a.createElement(ne.a,{type:"Text",placeholder:t.inventory.name,value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}}),this.state.nameF&&r.a.createElement(re.a,null,t.HELP.name))),r.a.createElement(ee.a,{controlId:"formHorizontalType",validationState:this.validateLocalType(),onBlur:function(){return e.setState({typeF:!0})},onFocus:function(){return e.setState({typeF:!1})}},r.a.createElement(ae.a,{componentClass:Pe.a,xs:4},t.inventory.type),r.a.createElement(ae.a,{xs:8},r.a.createElement(ne.a,{type:"Text",placeholder:t.inventory.type,value:this.state.productType,onChange:function(t){return e.setState({productType:t.target.value})}}),this.state.typeF&&r.a.createElement(re.a,null,t.HELP.name))),r.a.createElement(ee.a,{controlId:"formHorizontalDescription"},r.a.createElement(ae.a,{componentClass:Pe.a,xs:4},t.inventory.description),r.a.createElement(ae.a,{xs:8},r.a.createElement(ne.a,{type:"Text",placeholder:t.inventory.description,value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}})))),r.a.createElement(ae.a,{xs:8},r.a.createElement(ee.a,{controlId:"formHorizontalSName",validationState:this.validateLocalSName(),onBlur:function(){return e.setState({supNF:!0})},onFocus:function(){return e.setState({supNF:!1})}},r.a.createElement(ae.a,{componentClass:Pe.a,xs:3},t.inventory.suppName),r.a.createElement(ae.a,{xs:6},r.a.createElement(ne.a,{type:"Text",placeholder:t.inventory.supName,value:this.state.supplierName,onChange:function(t){return e.setState({supplierName:t.target.value})}}),this.state.supNF&&r.a.createElement(re.a,null,t.HELP.name)))),r.a.createElement(ae.a,{xs:8},r.a.createElement(ee.a,{controlId:"formHorizontalSPhone",validationState:this.validateLocalSNumber(),onBlur:function(){return e.setState({supPF:!0})},onFocus:function(){return e.setState({supPF:!1})}},r.a.createElement(ae.a,{componentClass:Pe.a,xs:3},t.inventory.suppPhone),r.a.createElement(ae.a,{xs:6},r.a.createElement(ne.a,{type:"Number",placeholder:t.inventory.suppPhone,value:this.state.supplierPhone,onChange:function(t){return e.setState({supplierPhone:t.target.value})}}),this.state.supPF&&r.a.createElement(re.a,null,t.HELP.phone)))),r.a.createElement(ae.a,{xs:8},r.a.createElement(ee.a,{controlId:"formHorizontalSAddress",validationState:this.validateLocalSAddress(),onBlur:function(){return e.setState({supAF:!0})},onFocus:function(){return e.setState({supAF:!1})}},r.a.createElement(ae.a,{componentClass:Pe.a,xs:3},t.inventory.suppAdd),r.a.createElement(ae.a,{xs:6},r.a.createElement(ne.a,{type:"Text",placeholder:t.inventory.suppAdd,value:this.state.spplierA,onChange:function(t){return e.setState({supplierAddress:t.target.value})}}),this.state.supAF&&r.a.createElement(re.a,null,t.HELP.name))))),r.a.createElement("hr",null),r.a.createElement(te.a,null,r.a.createElement(ae.a,{xs:6},r.a.createElement(ee.a,{controlId:"formHorizontalQuantity"},r.a.createElement(ae.a,{componentClass:Pe.a,xs:3},t.inventory.quantity),r.a.createElement(ae.a,{xs:6},r.a.createElement(ne.a,{type:"Number",placeholder:t.inventory.quantity,value:this.state.quantity,onChange:function(t){return e.setState({quantity:t.target.value})}})))),r.a.createElement(ae.a,{xs:6},r.a.createElement(ee.a,{controlId:"formHorizontalCost"},r.a.createElement(ae.a,{componentClass:Pe.a,xs:3},t.inventory.costPrice),r.a.createElement(ae.a,{xs:4},r.a.createElement(ne.a,{type:"Number",placeholder:this.state.costPrice,value:this.state.costPrice,onChange:function(t){return e.setState({costPrice:t.target.value})}}))),r.a.createElement(ee.a,{controlId:"formHorizontalRetail"},r.a.createElement(ae.a,{componentClass:Pe.a,xs:3},t.inventory.retailPrice),r.a.createElement(ae.a,{xs:4},r.a.createElement(ne.a,{type:"Number",placeholder:t.inventory.retailPrice,value:this.state.retailPrice,onChange:function(t){return e.setState({retailPrice:t.target.value})}}))),r.a.createElement(te.a,null,r.a.createElement(ae.a,{componentClass:Pe.a,xs:6,smPull:2},t.inventory.profit," ",+this.state.retailPrice-+this.state.costPrice," ",t.commonInfo.rmb)))),r.a.createElement(ee.a,null,r.a.createElement(te.a,null,r.a.createElement("hr",null),r.a.createElement(ae.a,{xsOffset:3,xs:2},r.a.createElement(le.a,{type:"submit",bsStyle:"success",block:!0},t.btns.submit)),r.a.createElement(ae.a,{xs:2},r.a.createElement(le.a,{bsStyle:"warning",onClick:function(){return e.clear()},block:!0},t.btns.clear))))))}}]),t}(r.a.Component)),at=B(function(e){function t(e,a){var n;return Object(C.a)(this,t),(n=Object(P.a)(this,Object(w.a)(t).call(this,e,a))).handleSelect=n.handleSelect.bind(Object(Y.a)(Object(Y.a)(n))),n.state={key:0},n}return Object(j.a)(t,e),Object(O.a)(t,[{key:"handleSelect",value:function(e){this.setState({key:e})}},{key:"render",value:function(){var e=this.props,t=e.inventory,a=e.locale;return r.a.createElement(ge.a,{eventKey:this.state.key,onSelect:this.handleSelect,id:"controlled-tab-example"},r.a.createElement(Ce.a,{eventKey:1,title:a.inventory.inventoryDetails},r.a.createElement(te.a,null,r.a.createElement(ae.a,{sm:6},t.length>0&&r.a.createElement(Ge,this.props)),r.a.createElement($,{level:3},r.a.createElement(ae.a,{sm:6},t.length>0&&r.a.createElement(Xe,this.props)))),r.a.createElement(te.a,null,r.a.createElement($,{level:2},r.a.createElement(ae.a,{sm:6},t.length>0&&r.a.createElement($e,this.props))),r.a.createElement($,{level:2},r.a.createElement(ae.a,{sm:6},t.length>0&&r.a.createElement(Ze,this.props))))),r.a.createElement(Ce.a,{eventKey:2,title:a.inventory.inventoryStatistics},r.a.createElement($,{level:3},r.a.createElement("div",null,r.a.createElement("h2",null,"COMING SOON!!!"),r.a.createElement("h3",null,"graphs and details about the actual sales")))),r.a.createElement(Ce.a,{eventKey:3,title:a.inventory.newInventory},r.a.createElement($,{level:3},r.a.createElement(tt,this.props))))}}]),t}(r.a.Component)),nt=function(){return function(e,t){return fetch("/inventory",{headers:{authorization:t().auth.token}}).then(function(e){return e.json()}).then(function(t){if(t.err)t.err.errmsg?e(M(t.err.errmsg,V)):e(M(t.err,V));else{var a=t.sort(function(e,t){var a=e.quantity,n=t.quantity;return a>n?-1:a<n?1:0});e({type:"fetch_inventory",payload:a})}}).catch(function(t){return e(M(t.errmsg,V))})}},rt=function(e){function t(){var e,a;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(P.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={allInven:[],selectedInven:""},a.getInventory=function(e){var t=a.state.allInven.filter(function(t){return t._id===e});a.setState({selectedInven:t[0]})},a.isSelected=function(e){return null!=a.state.selectedInven&&e===a.state.selectedInven._id},a.onSubmit=function(e){a.props.addInventory(e,a.props.token).catch(function(e){return console.log(e)})},a.onUpdate=function(e){alert("Inventory ".concat(a.state.selectedInven.name," level will be updated to ").concat(e))},a.onDelete=function(){alert("Will delete ".concat(a.state.selectedInven.name))},a.changePrice=function(e){a.update({retailPrice:e})},a.changeQuantity=function(e){a.update({quantity:e})},a.update=function(e){a.props.updateInventory(e,a.state.selectedInven._id,a.props.token)},a}return Object(j.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchInventory()}},{key:"render",value:function(){var e=this,t=this.state.allInven;return r.a.createElement("div",null,r.a.createElement(te.a,null,r.a.createElement(ae.a,{sm:2},t.length>0&&t.map(function(t){return r.a.createElement(qe,{name:t.name,getStaff:e.getInventory,id:t._id,key:t._id,iselected:e.isSelected(t._id)})})),r.a.createElement(ae.a,{sm:10},r.a.createElement(at,{inventory:this.state.selectedInven,changeQuantity:this.changeQuantity,changePrice:this.changePrice,onDelete:this.onDelete,onSubmit:this.onSubmit,onUpdate:this.onUpdate}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.inventory!==t.allInven){var a=e.inventory.length;return{allInven:e.inventory,selectedInven:a>0?e.inventory[0]:""}}return t}}]),t}(r.a.Component),lt=Object(s.b)(function(e){return{name:e.auth.staff.name,inventory:e.inventory}},function(e){return{updateInventory:function(t,a){return e(function(e,t){return function(a,n){return fetch("/inventory",{method:"PUT",credentials:"include",mode:"cors",headers:{"Content-Type":"application/json",authorization:n().auth.token},body:JSON.stringify({id:t,data:Object(z.a)({},e)})}).then(function(e){return e.json()}).then(function(e){e.err?e.err.errmsg?a(M(e.err.errmsg,V)):a(M(e.err,V)):(a(nt()),a(M("inventory_updated","success")))}).catch(function(e){return a(M(e.errmsg,V))})}}(t,a))},addInventory:function(t){return e((a=t,function(e,t){return fetch("/inventory",{method:"POST",credentials:"include",mode:"cors",headers:{"Content-Type":"application/json",authorization:t().auth.token},body:JSON.stringify(a)}.then(function(e){return console.log(e)}).then(function(e){return console.log(e.json()).then(function(e){return e.json()})}).then(function(t){t.err?t.err.errmsg?e(M(t.err.errmsg,V)):e(M(t.err,V)):(e(nt()),e(M("inventory_added","success")))}).catch(function(e){}))}));var a},fetchInventory:function(){return e(nt())}}})(rt),ct=a(124),st=a.n(ct),ot=a(118),ut=a(230),it=B(function(e){var t=e.title,a=e.phone,n=e.wechat,l=e.id,c=e.setCustomer,s=e.selected,o=e.locale;return r.a.createElement("div",{onClick:function(e){return c(l)}},r.a.createElement(ae.a,{md:4},r.a.createElement(Ne.a,{bsStyle:s?"success":"info"},r.a.createElement(Ne.a.Heading,null,r.a.createElement("b",null,t)),r.a.createElement(Ne.a.Body,null,r.a.createElement(te.a,null,r.a.createElement(ae.a,{md:5},o.customer.phone),r.a.createElement(ae.a,{md:1},a)),r.a.createElement(te.a,null,r.a.createElement(ae.a,{md:5},o.customer.wechat),r.a.createElement(ae.a,{md:1},n))))))}),mt=function(e){var t=e.list,a=e.setCustomer,n=e.selected;e.locale;return r.a.createElement("div",null,t.map(function(e){return r.a.createElement(it,{title:e.name,phone:e.phone,wechat:e.wechat,key:e._id,id:e._id,setCustomer:a,selected:n._id===e._id})}))},dt=B(function(e){function t(){var e,a;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(P.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={cost:a.props.price,quantity:a.props.quantity,requiredQuantity:0},a.increment=function(){var e=a.state.requiredQuantity+1,t=a.state.quantity-1;a.setState({requiredQuantity:e,total:parseFloat(a.props.price)*parseFloat(e),quantity:t},function(){a.props.selectItem(a.props.id,a.state.requiredQuantity,a.state.cost,a.props.title)})},a.decrement=function(){var e=a.state.requiredQuantity-1,t=a.state.quantity+1;a.setState({requiredQuantity:e,total:parseFloat(a.props.price)*parseFloat(e),quantity:t},function(){a.props.selectItem(a.props.id,a.state.requiredQuantity,a.state.cost,a.props.title)})},a.changePrice=function(e){var t=e.target.value;a.setState({cost:t},function(){a.props.selectItem(a.props.id,a.state.requiredQuantity,a.state.cost,a.props.title)})},a.requireStyle=function(){var e=a.props.quantity;return 0===e?"danger":e<10?"warning":"success"},a}return Object(j.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.description,n=e.price,l=e.quantity,c=e.locale;return r.a.createElement("div",null,r.a.createElement(ae.a,{md:6},r.a.createElement(Ne.a,{bsStyle:this.requireStyle()},r.a.createElement(Ne.a.Heading,null,t),r.a.createElement(Ne.a.Body,null,a,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(te.a,null,r.a.createElement(ae.a,{xs:8},r.a.createElement("b",null,c.purchase.ppUnit,":")),n),r.a.createElement(te.a,null,r.a.createElement(ae.a,{xs:8},r.a.createElement("b",null,c.purchase.qtyAvail,":"))," ",this.state.quantity),r.a.createElement(te.a,null,r.a.createElement(ae.a,{xs:8},r.a.createElement("b",null,c.purchase.required,":"))," ",this.state.requiredQuantity),r.a.createElement(te.a,null,r.a.createElement(ae.a,{xs:8},r.a.createElement("b",null,c.purchase.ttlPrice,":"))," ",this.state.cost*this.state.requiredQuantity," ",c.commonInfo.rmb),r.a.createElement(te.a,null,l>0&&r.a.createElement("div",null,r.a.createElement(ae.a,{xs:1,md:2},this.state.requiredQuantity<l&&r.a.createElement(le.a,{bsStyle:"info",onClick:this.increment},"+")),r.a.createElement(ae.a,{xs:1,md:2},this.state.requiredQuantity>0&&r.a.createElement(le.a,{bsStyle:"warning",onClick:this.decrement},"-")))),l>0&&r.a.createElement(ee.a,{controlId:"formHorizontalName"},r.a.createElement(ne.a,{type:"Number",placeholder:this.state.cost,onChange:this.changePrice}))))))}}]),t}(r.a.Component)),pt=a(229),ft=B(function(e){var t=e.compiledList,a=e.locale,n=0;return r.a.createElement("div",null,r.a.createElement(pt.a,{striped:!0,bordered:!0,condensed:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,a.purchase.item),r.a.createElement("th",null,a.purchase.qtyS),r.a.createElement("th",null,a.purchase.price),r.a.createElement("th",null,a.purchase.ttlPrice))),r.a.createElement("tbody",null,t.map(function(e,t){return n+=e.quantity*e.price,r.a.createElement("tr",{key:t},r.a.createElement("td",null,t+1),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.quantity),r.a.createElement("td",null,e.price),r.a.createElement("td",null,e.quantity*e.price))}),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:3},r.a.createElement("b",null,a.purchase.total)),r.a.createElement("td",{colSpan:2},"".concat(n," ").concat(a.commonInfo.rmb))))))}),ht=function(e){var t=e.list,a=e.selectItem,n=e.compiledList;return r.a.createElement(ot.a,null,r.a.createElement(ae.a,{md:8},t.map(function(e){return r.a.createElement(dt,{key:e._id,title:e.name,description:e.description,price:e.retailPrice,quantity:e.quantity,id:e._id,selectItem:a})})),r.a.createElement(ae.a,{md:4},r.a.createElement(ft,{compiledList:n})))},Et=B(function(e){var t=e.customer,a=e.staff,n=e.selectedItems,l=e.confirmOrder,c=e.cancel,s=e.locale,o=0,u=0;return r.a.createElement("div",null,r.a.createElement(te.a,null,r.a.createElement(ae.a,{xs:8,xsOffset:2},r.a.createElement(pt.a,{bordered:!0,condensed:!0,hover:!0},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("b",null,s.customer.name)),r.a.createElement("td",null,t.name),r.a.createElement("td",null,r.a.createElement("b",null,s.staff.name)),r.a.createElement("td",null,a.name)),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("b",null,s.customer.phone)),r.a.createElement("td",null,t.phone),r.a.createElement("td",null,r.a.createElement("b",null,s.commonInfo.date)),r.a.createElement("td",null,"12-09-2018")),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("b",null,s.customer.wechat)),r.a.createElement("td",null,t.wechat),r.a.createElement("td",null,r.a.createElement("b",null,s.commonInfo.time)),r.a.createElement("td",null,"12:52")))),r.a.createElement(pt.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",null,"#"),r.a.createElement("td",null,s.purchase.item),r.a.createElement("td",null,s.purchase.qtyS),r.a.createElement("td",null,s.purchase.price),r.a.createElement("td",null,s.purchase.total))),r.a.createElement("tbody",null,n.map(function(e,t){return o+=e.quantity*e.price,u+=e.quantity,r.a.createElement("tr",{key:t},r.a.createElement("td",null,t+1),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.quantity),r.a.createElement("td",null,e.price),r.a.createElement("td",null,e.quantity*e.price))}))),r.a.createElement(pt.a,{bordered:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",null,s.purchase.qtyQuan),r.a.createElement("td",null,s.purchase.total))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,u),r.a.createElement("td",null,"".concat(o," ").concat(s.commonInfo.rmb))))),r.a.createElement(ae.a,{md:2,smOffset:3},r.a.createElement(le.a,{bsStyle:"success",block:!0,onClick:function(){return l()}},s.btns.confirm)),r.a.createElement(ae.a,{md:2,smOffset:2},r.a.createElement(le.a,{bsStyle:"danger",block:!0,onClick:function(){return c()}},s.btns.cancel)))))}),vt=B(function(e){var t=e.locale,a=e.completed,n=e.refNo;return r.a.createElement("div",null,r.a.createElement(Ne.a,{bsStyle:"success"},r.a.createElement(Ne.a.Heading,null,r.a.createElement(Ne.a.Title,{componentClass:"h2"},t.purchase.success)),r.a.createElement(Ne.a.Body,null,t.purchase.purMsg),r.a.createElement(Ne.a.Body,null,t.purchase.purRefNo," ",n),r.a.createElement(te.a,null,r.a.createElement(ae.a,{md:2,smOffset:3},!1),r.a.createElement(ae.a,{md:2,smOffset:2},!1,r.a.createElement("br",null))),r.a.createElement(le.a,{block:!0,bsStyle:"success",onClick:a},t.btns.continue)))}),yt=function(e,t,a,n){return function(n){return new Promise(function(r,l){e.forEach(function(e){e.quantity,e.price,e.price,e.quantity,new Date,t._id,a._id,e._id}),n(M("purchase_placed","success")),r()})}},bt=["Select Customer","Select Product","Check Order","Completed"],St={stage:0,percent:25,customer:"",selectedItems:[]},gt=function(e){function t(){var e,a;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(P.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={allCust:[],allInven:[],stage:0,percent:0,customer:"",selectedItems:[],refNo:"",completed:!1},a.increment=function(){return a.setState(function(e){return{stage:e.stage+1,percent:e.percent+33}})},a.decrement=function(){return a.setState(function(e){return{stage:e.stage-1,percent:e.percent-25}})},a.reset=function(){return a.setState(Object(z.a)({},St))},a.setCustomer=function(e){var t=a.state.allCust.filter(function(t){return t._id===e});a.setState({customer:t[0]})},a.selectItem=function(e,t,n,r){var l=a.state.selectedItems;if(l.find(function(t){return t._id===e})){var c=l.map(function(a){return a._id===e?Object(z.a)({},a,{quantity:parseInt(t),price:parseFloat(n)}):a});a.setState({selectedItems:c.filter(function(e){return e.quantity>0})})}else t>0&&(l.push({_id:e,quantity:parseInt(t),price:parseFloat(n),name:r}),a.setState({selectedItems:l}))},a.disableNext=function(){return""===a.state.customer&&0===a.state.stage||0===a.state.selectedItems.length&&1===a.state.stage},a.confirmOrder=function(){var e=a.state.customer,t=a.state.selectedItems,n=st()();a.setState({refNo:n}),a.props.createPurchases(t,e,a.props.staff,n),a.state.completed&&a.increment()},a}return Object(j.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchCustomers(),this.props.fetchInventory()}},{key:"render",value:function(){var e=this.props.locale;return r.a.createElement(ot.a,null,r.a.createElement("h3",null,bt[this.state.stage]),r.a.createElement("div",null,r.a.createElement(ut.a,{active:!0,now:this.state.percent,label:e.purchase.STAGES[this.state.stage]})),3!==this.state.stage&&r.a.createElement("div",null,r.a.createElement(te.a,null,r.a.createElement(ae.a,{xs:2},r.a.createElement(le.a,{bsStyle:"warning",onClick:this.decrement,block:!0,disabled:!(this.state.stage>0)},"Back")),this.state.stage<2&&r.a.createElement(ae.a,{xs:2},r.a.createElement(le.a,{bsStyle:"primary",onClick:this.increment,block:!0,disabled:this.disableNext()},"Next")),this.state.stage<2&&r.a.createElement(ae.a,{xs:1,smOffset:6},r.a.createElement(le.a,{bsStyle:"danger",onClick:this.reset,small:"true"},"Clear")))),0===this.state.stage&&r.a.createElement("div",null,r.a.createElement(mt,{list:this.state.allCust,setCustomer:this.setCustomer,selected:this.state.customer})),1===this.state.stage&&r.a.createElement("div",null,r.a.createElement(ht,{list:this.state.allInven,selectItem:this.selectItem,compiledList:this.state.selectedItems})),2===this.state.stage&&r.a.createElement("div",null,r.a.createElement(Et,{cancel:this.reset,confirmOrder:this.confirmOrder,selectedItems:this.state.selectedItems,customer:this.state.customer,staff:this.props.staff})),3===this.state.stage&&r.a.createElement("div",null,r.a.createElement(vt,{completed:this.reset,refNo:this.state.refNo})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e!==t?{allInven:e.inventory,allCust:e.customers,stage:"purchase_placed"===e.message?3:t.stage,percent:"purchase_placed"===e.message?100:t.percent}:t}}]),t}(r.a.Component),Ct=Object(s.b)(function(e){return{staff:e.auth.staff,inventory:e.inventory,customers:e.customers,message:e.alert.msg}},function(e){return{fetchCustomers:function(){return e(Je())},fetchInventory:function(){return e(nt())},createPurchases:function(t,a,n,r){return e(yt(t,a,n))}}})(B(gt)),Ot=function(e){function t(){return Object(C.a)(this,t),Object(P.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return console.log(Object({NODE_ENV:"production",PUBLIC_URL:""}).ENV),r.a.createElement(F.a,{history:L},r.a.createElement("div",null,"development"===Object({NODE_ENV:"production",PUBLIC_URL:""}).ENV&&r.a.createElement(Se,null),r.a.createElement(he,null,r.a.createElement(W,null)),r.a.createElement("div",{className:"container"},r.a.createElement(be,null),r.a.createElement(he,null,r.a.createElement(X,null)),r.a.createElement(k.a,null,r.a.createElement(x,{path:"/purchase",exact:!0,Component:Ct,level:-1}),r.a.createElement(x,{path:"/staff",exact:!0,Component:Ue,level:3}),r.a.createElement(x,{path:"/customer",exact:!0,Component:Ye,level:-1}),r.a.createElement(x,{path:"/inventory",exact:!0,Component:lt,level:-1}),r.a.createElement(x,{path:"/dashboard",exact:!0,Component:Ee,level:-1}),r.a.createElement(I.a,{path:"/",exact:!0,component:fe})))))}}]),t}(r.a.Component),Pt=Object(o.e)(Object(o.c)({auth:m,alert:p,staff:h,customers:v,inventory:b}),S(),o.a.apply(void 0,g)),wt=document.getElementById("root"),jt=r.a.createElement(s.a,{store:Pt},r.a.createElement(Ot,null));c.a.render(jt,wt)}},[[125,2,1]]]);
//# sourceMappingURL=main.cbf453e8.chunk.js.map