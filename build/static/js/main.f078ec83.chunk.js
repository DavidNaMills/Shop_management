(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{151:function(e,t,a){e.exports=a(255)},255:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(37),s=a.n(l),c=a(19),o=a(52),i=a(135),u={},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"login":return t.payload;case"logout":return u;default:return e}},d={msg:""},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"alert":return t.payload;case"reset_alert":return d;default:return e}},f=[],h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"fetch_staff":return t.payload;default:return e}},E=[],y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"fetch_customers":return t.payload;default:return e}},v=[],b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"fetch_inventory":return t.payload;default:return e}},S={completed:!1},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S;switch((arguments.length>1?arguments[1]:void 0).type){case"completed":return{completed:!0};case"reset":return S;default:return e}},_={isLoading:!1},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_;switch((arguments.length>1?arguments[1]:void 0).type){case"start_loader":return{isLoading:!0};case"stop_loader":return{isLoading:!1};default:return e}},C={lan:"en"},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"change_langauge":return{lan:t.payload};default:return e}},F=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.d,D=[i.a],P=a(7),I=a(8),L=a(11),j=a(9),T=a(10),x=a(21),k=a(25),A=a(22),N=a(136),M=a.n(N),q=M()(),H=a(24),U=Object(c.b)(function(e){return{auth:e.auth}})(function(e){var t=e.Component,a=e.path,n=e.auth;return r.a.createElement(A.a,{path:a,render:function(){return n.token?r.a.createElement(t,null):r.a.createElement(H.a,{to:{pathname:"/"}})}})}),B=a(271),R=a(142),z=a(256),V=a(257),Q={logout:"\u9000\u51fa",settings:"\u8bbe\u7f6e",welcomeMsg:"\u767b\u5f55\u4e3a\uff1a:",btns:{back:"\u4e0a\u4e00\u4e2a",next:"\u4e0b\u4e00\u6b65",clear:"\u6e05\u695a",confirm:"\u786e\u8ba4",cancel:"\u53d6\u6d88",delete:"\u5220\u9664",submit:"\u63d0\u4ea4",updateLvl:"\u66f4\u65b0\u7ea7\u522b",updateQty:"\u66f4\u65b0\u6570\u91cf",updatePrc:"\u66f4\u65b0\u4ef7\u683c",emailInvoice:"\u7535\u5b50\u90ae\u4ef6\u53d1\u7968",printInvoice:"\u6253\u5370\u53d1\u7968"},mainNav:{dashboard:"\u5bb6",purchase:"\u8d2d\u4e70",staff:"\u5de5\u4f5c\u4eba\u5458",customer:"\u5ba2\u6237",inventory:"\u5e93\u5b58"},purchase:{selectCust:"\u9009\u62e9\u4e00\u4e2a\u5ba2\u6237",selectProduct:"\u9009\u62e9\u4ea7\u54c1",checkOrder:"\u68c0\u67e5\u8ba2\u5355",completed:"\u5b8c\u6210",success:"\u6210\u529f",purMsg:"\u8d2d\u4e70\u5df2\u7ecf\u786e\u8ba4",purRefNo:"\u8d2d\u4e70\u53c2\u8003\u7f16\u53f7:",ppUnit:"\u6bcf\u5355\u4f4d\u4ef7\u683c",qtyAvail:"\u53ef\u7528\u6570\u91cf",required:"\u5fc5\u8981",ttlPrice:"\u603b\u4ef7",price:"\u4ef7\u683c",item:"\u9879\u76ee",qty:"\u6570\u91cf",qtyS:"\u6570\u91cf",qtyQuan:"\u603b\u6570\u91cf",total:"\u603b",staffName:"\u5458\u5de5\u59d3\u540d",customerName:"\u5ba2\u6237\u540d\u79f0",STAGES:["\u9009\u62e9\u5ba2\u6237","\u9009\u62e9\u4ea7\u54c1","\u68c0\u67e5\u8ba2\u5355","\u5b8c\u6210"]},staff:{staffDetails:"\u5458\u5de5\u8be6\u7ec6\u4fe1\u606f",newStaff:"\u65b0\u5458\u5de5",LEVEL:["\u57fa\u672c","\u521d\u7ea7","\u9ad8\u7ea7","\u7ba1\u7406\u5458"],level:"\u7b49\u7ea7",securityLevel:"\u5b89\u5168\u7ea7\u522b",name:"\u540d\u79f0",email:"\u7535\u5b50\u90ae\u4ef6",security:"\u5b89\u5168\u7ea7\u522b",username:"\u7528\u6237\u540d",password:"\u5bc6\u7801",repassword:"\u91cd\u65b0\u8f93\u5165\u5bc6\u7801",updateSecurityLvl:"\u66f4\u65b0\u5b89\u5168\u7ea7\u522b"},customer:{customerDetails:"\u5ba2\u6237\u8be6\u7ec6\u4fe1\u606f",newCustomer:"\u65b0\u5ba2\u6237",name:"\u540d\u79f0",email:"\u7535\u5b50\u90ae\u4ef6",wechat:"\u5fae\u4fe1",phone:"\u7535\u8bdd",type:"\u5ba2\u6237\u7c7b\u578b",CUSTOMERTYPES:["new","current","super","god like"],address:"\u5730\u5740",sex:"\u6027\u522b",male:"\u7537",female:"\u5973",dob:"DOB",MONTHS:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],selected:"\u9009"},inventory:{inventoryDetails:"\u5e93\u5b58\u660e\u7ec6",newInventory:"\u65b0\u5e93\u5b58",inventoryStatistics:"\u5e93\u5b58\u7edf\u8ba1",name:"\u4ea7\u54c1\u540d\u79f0",type:"\u4ea7\u54c1\u7c7b\u578b",description:"\u63cf\u8ff0",suppDetails:"\u4f9b\u5e94\u5546\u8be6\u60c5",suppName:"\u4f9b\u5e94\u5546\u540d\u79f0",suppAdd:"\u4f9b\u5e94\u5546\u5730\u5740",suppPhone:"\u4f9b\u5e94\u5546\u7535\u8bdd",quantity:"\u6570\u91cf",changeQuantity:"\u6539\u53d8\u6570\u91cf",currentQuantity:"\u5f53\u524d\u6570\u91cf",costPrice:"\u6210\u672c\u4ef7",retailPrice:"\u96f6\u552e\u4ef7",profit:"\u5229\u6da6",pricing:"\u5b9a\u4ef7"},commonInfo:{selected:"\u5df2\u9009\u62e9:",rmb:"\u4eba\u6c11\u5e01"},HELP:{name:"\u540d\u79f0\u5fc5\u987b\u5305\u542b\u81f3\u5c112\u4e2a\u5b57\u7b26",email:"\u8f93\u5165\u6709\u6548\u7684\u7535\u5b50\u90ae\u4ef6",username:"\u7528\u6237\u540d\u5fc5\u987b\u81f3\u5c11\u5305\u542b8\u4e2a\u5b57\u7b26",password:"\u81f3\u5c118\u4e2a\u5b57\u7b26. \u5fc5\u987b\u5305\u542b:1\u4e2a\u5927, 1\u4e2a\u6570\u5b57, 1\u4e2a!@\uff03$\uff05^\uff06*",confirmPass:"\u5bc6\u7801\u4e0d\u5339\u914d",phone:"\u5fc5\u987b\u662f11\u4e2a\u53f7\u7801",wechat:"\u5fae\u4fe1\u5fc5\u987b\u5305\u542b\u81f3\u5c112\u4e2a\u5b57\u7b26"},ALERTS:{undefined_err:"\u9519\u8bef\uff1a\u672a\u5b9a\u4e49",staff_1:"\u5de5\u4f5c\u4eba\u5458\u6ca1\u6709\u5f97\u6551",no_user:"\u627e\u4e0d\u5230\u5de5\u4f5c\u4eba\u5458",not_active:"\u5de5\u4f5c\u4eba\u5458\u4e0d\u6d3b\u8dc3",password_mismatch:"\u5bc6\u7801\u4e0d\u5339\u914d",staff_not_found:"\u627e\u4e0d\u5230\u5de5\u4f5c\u4eba\u5458",staff_exists:"\u5de5\u4f5c\u4eba\u5458\u5df2\u7ecf\u5b58\u5728",inven_add_fail:"\u5e93\u5b58\u672a\u4fdd\u5b58",inven_not_found:"\u627e\u4e0d\u5230\u5e93\u5b58",inventory_not_deleted:"\u5e93\u5b58\u672a\u5220\u9664",error_code_1:"\u9519\u8bef\u4ee3\u78011",pur_not_saved:"\u8d2d\u4e70\u672a\u4fdd\u5b58",purchase_update_failed:"\u8d2d\u4e70\u66f4\u65b0\u5931\u8d25",no_record_to_delete:"\u6ca1\u6709\u8981\u5220\u9664\u7684\u8d2d\u4e70",staff_validation:"\u9a8c\u8bc1\u9519\u8bef",customer_not_found:"\u627e\u4e0d\u5230\u5ba2\u6237\u201d",customer_not_created:"\u5ba2\u6237\u672a\u521b\u5efa",invalid_search_criteria:"\u65e0\u6548\u7684\u641c\u7d22\u6761\u4ef6",staff_saved:"\u5df2\u521b\u5efa\u65b0\u5458\u5de5",unauthorised:"\u7528\u6237\u540d\u548c/\u6216\u5bc6\u7801\u4e0d\u6b63\u786e",customer_added:"\u6dfb\u52a0\u4e86\u65b0\u5ba2\u6237",exists:"\u5df2\u7ecf\u5b58\u5728\uff01",inventory_added:"\u5df2\u6dfb\u52a0\u65b0\u5e7f\u544a\u8d44\u6e90",inventory_updated:"\u65b0\u5e93\u5b58\u5df2\u66f4\u65b0",purchase_placed:"\u5df2\u653e\u7f6e\u8d2d\u4e70",staff_created:"\u5de5\u4f5c\u4eba\u5458\u5df2\u88ab\u6dfb\u52a0",level_updated:"\u7b49\u7ea7\u5df2\u66f4\u65b0",staff_deleted:"\u5de5\u4f5c\u4eba\u5458\u5df2\u88ab\u5220\u9664",inventory_cost:"\u5e93\u5b58\u6210\u672c\u5df2\u7ecf\u6539\u53d8",inventory_quantity:"\u5e93\u5b58\u6570\u91cf\u5df2\u66f4\u6539",Purchase_not_placed:"\u653e\u7f6e\u8d2d\u4e70\u65f6\u51fa\u9519",email_exists:"\u7535\u5b50\u90ae\u4ef6\u5df2\u5b58\u5728",username_exists:"\u7528\u6237\u540d\u5df2\u5b58\u5728",DEMO_CUSTOMER_EXISTS:"Demo Version: (Randomised) Customer already exists",DEMO_INVALID_EMAIL:"Demo Version: (Randomised) Invalid email address",DEMO_EMAIL_EXISTS:"Demo Version: (Randomised) Email already exists",DEMO_CUSTOMER_ADDED:"(Demo version: not really) customer_added",DEMO_STAFF_EXISTS:"Demo Version: (Randomised) Staff already exists",DEMO_STAFF_INVALID_EMAIL:"Demo Version: (Randomised) Invalid email address",DEMO_STAFF_EMAIL_EXISTS:"Demo Version: (Randomised) Email already exists",DEMO_STAFF_CREATED:"(Demo version: not really) staff Added",DEMO_STAFF_LEVEL:"(Demo version: not really) level updated",DEMO_STAFF_DELETED:"(Demo version: not really) staff deleted",DEMO_INVENTORY_UPDATED:"(Demo version) Inventory Updated",DEMO_INVENTORY_ADDED:"(Demo version) inventory_added",DEMO_INVENTORY_PURCHASE:"(Demo version) purchase placed"}},K={logout:"Logout",settings:"Settings",welcomeMsg:"Logged in as: ",btns:{back:"Previous",next:"Next",clear:"Clear",confirm:"Confirm",continue:"Continue",cancel:"Cancel",delete:"Delete",submit:"Submit",updateLvl:"Update Level",updateQty:"Update Quantity",updatePrc:"Update Price",emailInvoice:"Email Invoice",printInvoice:"Print Invoice"},mainNav:{dashboard:"Home",purchase:"Purchases",staff:"Staff",customer:"Customers",inventory:"Inventory"},purchase:{selectCust:"Select a customer",selectProduct:"Select a product",checkOrder:"Check order",completed:"Completed",success:"Success",purMsg:"Purchase has been confirmed",purRefNo:"Purchase reference number: ",ppUnit:"Price per unit",qtyAvail:"Quantity available",required:"Required",ttlPrice:"Total price",price:"price",item:"Item",qty:"Quantity",qtyS:"Qty",qtyQuan:"Total Qty",total:"Total",staffName:"Staff name",customerName:"Customer name",STAGES:["Select Customer","Select Product","Check Order","Completed"]},staff:{staffDetails:"Staff Details",newStaff:"New Staff",LEVEL:["Basic","Junior","Advanced","Admin"],level:"Level",securityLevel:"Security Level",name:"Name",email:"Email",security:"Security level",username:"Username",password:"Password",repassword:"Re-enter password",updateSecurityLvl:"Update Security Level"},customer:{customerDetails:"Customer Details",newCustomer:"New Customer",name:"Name",email:"Email",wechat:"WeChat",phone:"Phone",type:"Customer type",CUSTOMERTYPES:["New","Current","Super","Advanced"],address:"Address",sex:"Sex",male:"Male",female:"Female",dob:"DoB",MONTHS:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],selected:"Selected"},inventory:{inventoryDetails:"Inventory Details",newInventory:"New Inventory",inventoryStatistics:"Inventory Statistics",name:"Product Name",type:"Product type",description:"description",suppDetails:"Suppliers Details",suppName:"Suppliers name",suppAdd:"Suppliers Address",suppPhone:"Suppliers Phone",quantity:"Quantity",changeQuantity:"Change quantity",currentQuantity:"Current quantity",costPrice:"Cost price",retailPrice:"Retail price",profit:"Profit",pricing:"Pricing"},commonInfo:{selected:"Selected: ",rmb:"rmb",date:"Date",time:"Time"},HELP:{name:"Name must contain at least 2 characters",email:"Enter a valid email",username:"Username must contain at least 8 characters",password:"At least 8 characters long. Must contain: 1 uppercase, 1 number, 1 !@#$%^&*",confirmPass:"Password does not match",phone:"Must be 11 numbers",wechat:"Wechat must contain at least 2 characters"},ALERTS:{undefined_err:"Error: undefined",staff_1:"Staff not saved",no_user:"Staff not found",not_active:"Staff not active",password_mismatch:"Password does not match",staff_not_found:"Staff not found",staff_exists:"Member of staff already exists",inven_add_fail:"Inventory not saved",inven_not_found:"Inventory was not found",inventory_not_deleted:"Inventory not deleted",error_code_1:"Error code 1",pur_not_saved:"Purchase not saved",purchase_update_failed:"Purchase update failed",no_record_to_delete:"No purchase to delete",staff_validation:"Validation error",customer_not_found:"Customer not found",customer_not_created:"Customer not created",invalid_search_criteria:"Invalid search criteria",staff_saved:"New staff has been created",unauthorised:"Incorrect Username and/or Password",customer_added:"New customer has been added",exists:"Already exists!",inventory_added:"New inventory has been added",inventory_updated:"New inventory has been updated",purchase_placed:"Purchase has been placed",staff_created:"Staff has been added",level_updated:"Level has been updated",staff_deleted:"Staff member has been deleted",inventory_cost:"Inventory cost has been changed",inventory_quantity:"Inventory quantity has been changed",Purchase_not_placed:"Error placing purchase",email_exists:"Email already exists",username_exists:"Username already exists",DEMO_CUSTOMER_EXISTS:"Demo Version: (Randomised) Customer already exists",DEMO_INVALID_EMAIL:"Demo Version: (Randomised) Invalid email address",DEMO_EMAIL_EXISTS:"Demo Version: (Randomised) Email already exists",DEMO_CUSTOMER_ADDED:"(Demo version: not really) customer_added",DEMO_STAFF_EXISTS:"Demo Version: (Randomised) Staff already exists",DEMO_STAFF_INVALID_EMAIL:"Demo Version: (Randomised) Invalid email address",DEMO_STAFF_EMAIL_EXISTS:"Demo Version: (Randomised) Email already exists",DEMO_STAFF_CREATED:"(Demo version: not really) staff Added",DEMO_STAFF_LEVEL:"(Demo version: not really) level updated",DEMO_STAFF_DELETED:"(Demo version: not really) staff deleted",DEMO_INVENTORY_UPDATED:"(Demo version) Inventory Updated",DEMO_INVENTORY_ADDED:"(Demo version) inventory_added",DEMO_INVENTORY_PURCHASE:"(Demo version) purchase placed"}},Y=r.a.createContext(Q),J=function(e){var t=function(t){function a(e){var t;return Object(P.a)(this,a),(t=Object(L.a)(this,Object(j.a)(a).call(this,e))).state={language:t.props.language},t}return Object(T.a)(a,t),Object(I.a)(a,[{key:"returnLanguage",value:function(){switch(this.props.language){case"en":return K;case"zh":return Q;default:return K}}},{key:"render",value:function(){var t=this;return r.a.createElement(Y.Provider,{value:this.returnLanguage()},r.a.createElement(Y.Consumer,null,function(a){return r.a.createElement(e,Object.assign({},t.props,{locale:a}))}))}}]),a}(n.Component);return Object(c.b)(function(e){return{language:e.language.lan}})(t)},X=a(149),Z=Object(X.a)(r.a,{useCssModules:!1}),$=J(function(e){var t=e.locale,a=e.logout,n=e.user,l=e.changeLanguage;return r.a.createElement(B.a,{collapseOnSelect:!0},r.a.createElement(B.a.Header,null,r.a.createElement(B.a.Brand,null,"ShangNaDavid"),r.a.createElement(B.a.Toggle,null)),r.a.createElement(B.a.Collapse,null,r.a.createElement(R.a,{pullRight:!0},n&&r.a.createElement(z.a,{eventKey:3,title:"".concat(t.welcomeMsg," ").concat(n.name," ").concat(t.staff.level,": ").concat(t.staff.LEVEL[n.level]),id:"basic-nav-dropdown"},r.a.createElement(V.a,{eventKey:3.1},t.settings),r.a.createElement(V.a,{divider:!0}),r.a.createElement(V.a,{eventKey:3.2,onClick:function(){return a()}},t.logout)),r.a.createElement(z.a,{eventKey:1,title:"Language",id:"basic-nav-dropdown"},r.a.createElement(V.a,{eventKey:1.1,onClick:function(){l("zh")}},r.a.createElement(Z,{code:"cn",size:"lg"})," \u4e2d\u6587"),r.a.createElement(V.a,{eventKey:1.2,onClick:function(){l("en")}},r.a.createElement(Z,{code:"gb",size:"lg"})," English")))))}),G=a(29),W=function(e,t){return function(a){a(ee({msg:e,typ:t})),setTimeout(function(){a(te())},1e4)}},ee=function(e){return{type:"alert",payload:Object(G.a)({},e)}},te=function(){return{type:"reset_alert"}},ae="danger",ne="success",re={token:"TESTTESTTEST",staff:{name:"Dummy Account",level:3,_id:"5bb4002061d4a7"}},le=function(e){return{type:"login",payload:e}},se=function(e,t){return function(a){a({type:"start_loader"}),fetch("/login",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},crossdomain:!0,body:JSON.stringify({username:e,password:t})}).then(function(e){if(401!==e.status)return e;a({type:"stop_loader"}),a(W("unauthorised",ae)),q.replace("/")}).then(function(e){return e.json()}).then(function(e){a(le(e))}).then(function(){a({type:"stop_loader"}),q.replace("/dashboard")}).catch(function(e){a({type:"stop_loader"})})}},ce=function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(L.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(r)))).changeLocale=function(e){console.log(e),a.props.locale(e)},a}return Object(T.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{marginBottom:"2vh"}},r.a.createElement($,{changeLanguage:this.changeLocale,logout:this.props.logout,user:this.props.user}))}}]),t}(r.a.Component),oe=Object(c.b)(function(e){return{user:e.auth.staff,token:e.auth.token}},function(e,t){return{logout:function(){return e(function(e){e({type:"logout"})})},locale:function(t){return e(function(e){return{type:"change_langauge",payload:e}}(t))}}})(ce),ie=a(33),ue=a(64),me=a(210),de=Object(c.b)(function(e){return{staffLevel:e.auth.staff.level}})(function(e){return!0===+e.staffLevel>=+e.level&&e.children}),pe=J(function(e){function t(e,a){var n;return Object(P.a)(this,t),(n=Object(L.a)(this,Object(j.a)(t).call(this,e,a))).handleSelect=n.handleSelect.bind(Object(ie.a)(Object(ie.a)(n))),n.state={key:1},n}return Object(T.a)(t,e),Object(I.a)(t,[{key:"handleSelect",value:function(e){this.setState({key:e})}},{key:"render",value:function(){var e=this,t=this.props.locale;return r.a.createElement(R.a,{bsStyle:"tabs",justified:!0,activeKey:this.state.key,onSelect:function(t){return e.handleSelect(t)}},r.a.createElement(ue.LinkContainer,{to:"/dashboard"},r.a.createElement(me.a,{eventKey:1},t.mainNav.dashboard)),r.a.createElement(ue.LinkContainer,{to:"/purchase"},r.a.createElement(me.a,{eventKey:2},t.mainNav.purchase)),r.a.createElement(de,{level:3},r.a.createElement(ue.LinkContainer,{to:"/staff"},r.a.createElement(me.a,{eventKey:3},t.mainNav.staff))),r.a.createElement(ue.LinkContainer,{to:"/customer"},r.a.createElement(me.a,{eventKey:4},t.mainNav.customer)),r.a.createElement(ue.LinkContainer,{to:"/inventory"},r.a.createElement(me.a,{eventKey:5},t.mainNav.inventory)))}}]),t}(r.a.Component)),fe=a(258),he=a(259),Ee=a(260),ye=a(272),ve=a(261),be=a(23),Se=function(e){return!!/^(([^<>().,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},ge=function(e){return e.length>1},_e=function(e){return!(!/(^[0-9]{11})/.test(e)||11!==e.length)},Oe=function(e){return e.length>7},Ce=function(e){return/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#%&])(?=.{8,})/.test(String(e))},we=function(e,t){return e===t},Fe={username:"",password:"",isUsername:!0,userF:!1,passF:!1,displayBtn:!1},De={margin:"15vh",paddingTop:"1vh",marginLeft:"5vh",paddingLeft:"10vh",marginRight:"5vh",paddingRight:"10vh",paddingBottom:"5vh",border:"solid black 1px",borderRadius:"5px"},Pe={textAlign:"center",paddingBottom:"30px"},Ie=function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(a=Object(L.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(l)))).state={username:"",password:"",isUsername:!0,userF:!1,passF:!1,displayBtn:!1},a.validateLocalUsername=function(){if(a.state.userF){a.state.username.length>8&&a.setState({displayBtn:!0});var e=Oe(a.state.username);return e&&a.setState({userF:!1,displayBtn:!0}),e?"success":"error"}return null},a.validateLocalPassword=function(){if(a.state.passF){var e=Ce(a.state.password);return e&&a.setState({passF:!1}),e?"success":"error"}return null},a.userChange=function(e){a.setState({username:e.target.value},function(){a.setState({displayBtn:Oe(a.state.username)})})},a.passChange=function(e){a.setState({password:e.target.value},function(){a.setState({displayBtn:Ce(a.state.password)})})},a.displayUsername=function(){return r.a.createElement("div",null,r.a.createElement("h1",{style:Pe},"ShangNaDavid"),r.a.createElement("h2",null,a.props.locale.staff.username),r.a.createElement("form",null,r.a.createElement(fe.a,{controlId:"formHorizontalUsername",validationState:a.validateLocalUsername(),onBlur:function(){return a.setState({userF:!0})}},r.a.createElement(he.a,null,r.a.createElement(Ee.a,{md:12},r.a.createElement(ye.a,{type:"Username",placeholder:a.props.locale.staff.username,value:a.state.username,onChange:function(e){return a.userChange(e)}}),a.state.userF&&r.a.createElement(ve.a,null,a.props.locale.HELP.username))))))},a.displayPassword=function(){return r.a.createElement("div",null,r.a.createElement("h1",{style:Pe},"ShangNaDavid"),r.a.createElement("h2",null,a.props.locale.staff.password),r.a.createElement("form",null,r.a.createElement(fe.a,{controlId:"formHorizontalPassword",validationState:a.validateLocalPassword(),onBlur:function(){return a.setState({passF:!0})}},r.a.createElement(he.a,null,r.a.createElement(Ee.a,{md:12},r.a.createElement(ye.a,{type:"Password",placeholder:a.props.locale.staff.password,value:a.state.password,onChange:function(e){return a.passChange(e)}}),a.state.passF&&r.a.createElement(ve.a,null,a.props.locale.HELP.password))))))},a.btnOnClick=function(){a.state.isUsername?a.setState({isUsername:!1,displayBtn:!1,userF:!1,passF:!1}):a.props.startLogin(a.state.username,a.state.password)},a.cancel=function(){a.setState(Object(G.a)({},Fe))},a}return Object(T.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){var e=this,t=this.props.locale;return r.a.createElement("div",{className:"container"},r.a.createElement(Ee.a,{md:8,mdOffset:2},r.a.createElement("div",{style:De},r.a.createElement(he.a,null,this.state.isUsername?this.displayUsername():this.displayPassword(),this.state.displayBtn&&r.a.createElement("div",null,r.a.createElement(he.a,null,r.a.createElement(Ee.a,{md:12},r.a.createElement(be.a,{bsStyle:"info",onClick:function(){e.btnOnClick()},block:!0,disabled:this.props.isLoading},t.btns.next))))),r.a.createElement("div",null,r.a.createElement(he.a,null,r.a.createElement(Ee.a,{md:12},r.a.createElement("br",null),r.a.createElement(be.a,{bsStyle:"warning",onClick:function(){e.cancel()},block:!0,disabled:this.props.isLoading},t.btns.cancel)))))))}}]),t}(r.a.Component),Le=Object(c.b)(function(e){return{isLoading:e.spinner.isLoading}},function(e){return{startLogin:function(t,a){return e(function(e,t){return function(a){"demodemo"===e&&"111zzzZZZ!"===t?(a({type:"start_loader"}),setTimeout(function(){a(le(re)),a({type:"stop_loader"}),q.replace("/dashboard")},3e3)):a(se(e,t))}}(t,a))}}})(J(Ie)),je=Object(c.b)(function(e){return{token:e.auth.token}})(function(e){return r.a.createElement("div",null,e.token&&e.children)}),Te=function(){return r.a.createElement("div",null,r.a.createElement("h2",{style:{marginBottom:"30px",marginTop:"20px"}},"Phase 2 in development"),r.a.createElement("h4",null,"Features to be implemented"),r.a.createElement("ul",null,r.a.createElement("li",null,"Better design of login page and home, inc. use of glyphs"),r.a.createElement("li",null,"Better customer and inventory management"),r.a.createElement("li",null,"Viewing/searching/filtering of purchase details"),r.a.createElement("li",null,"Sales statistics"),r.a.createElement("li",null,"Staff performance statistics"),r.a.createElement("li",null,"Inventory statistics"),r.a.createElement("li",null,"Email customer receipt"),r.a.createElement("li",null,"Notification of customer birthdays"),r.a.createElement("li",null,"News letter creation"),r.a.createElement("li",null,"Strengthened security"),r.a.createElement("li",null,"Addition of image upload/display for inventory"),r.a.createElement("li",null,"Staff details management including password change/recovery"),r.a.createElement("li",null,"More informative error message reports"),r.a.createElement("li",null,"Ability to leave custom messages for staff")),r.a.createElement("p",{style:{marginTop:"20px"}},"Estimated date of completion: December 2018"))},xe=a(275),ke=function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(L.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(r)))).findMsg=function(e){return a.props.locale.ALERTS.filter(function(t){return t===e})},a}return Object(T.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){var e=this.props.alert,t=e.msg,a=e.typ,n=this.props.locale;return r.a.createElement("div",null,t&&r.a.createElement(xe.a,{bsStyle:a},r.a.createElement("p",null,n.ALERTS[t])))}}]),t}(r.a.Component),Ae=Object(c.b)(function(e){return{alert:e.alert}})(J(ke)),Ne=a(146),Me=function(e){function t(){return Object(P.a)(this,t),Object(L.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){var e=this.props.isLoading,t={position:"absolute",top:0,left:0,alignItems:"center",display:"flex",height:"100vh",justifyContent:"center",width:"100vw",zIndex:-9999};return r.a.createElement("div",{style:e?Object(G.a)({},t,{zIndex:999,backgroundColor:"rgb(89, 108, 255, 0.2)"}):t},r.a.createElement(Ne.RingLoader,{sizeUnit:"vh",size:20,color:"#00FFFF",loading:e}))}}]),t}(r.a.Component),qe=Object(c.b)(function(e){return{isLoading:e.spinner.isLoading}})(Me),He=a(266),Ue=a(274),Be=a(262),Re=a(263),ze=a(264),Ve=a(265),Qe=a(273),Ke={name:"",level:0,username:"",email:"",password:"",password2:"",nameF:!1,emailF:!1,userF:!1,passF:!1,passC:!1,levelF:!0},Ye=J(function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(L.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",level:0,username:"",email:"",password:"",password2:"",nameF:!1,emailF:!1,userF:!1,passF:!1,passC:!1},a.onSubmit=function(e){e.preventDefault();var t=a.state,n=t.name,r=t.level,l=t.username,s=t.email,c=t.password;a.fullValidation()?a.props.onSubmit({name:n,level:r,username:l,email:s,password:c}):alert("Fix your mistakes!")},a.fullValidation=function(){return!!(ge(a.state.name)&&Se(a.state.email)&&Oe(a.state.username)&&Ce(a.state.password))},a.validateLocalName=function(){return a.state.nameF?ge(a.state.name)?"success":"error":null},a.validateLocalEmail=function(){if(a.state.emailF){var e=Se(a.state.email);return e&&a.setState({emailF:!1}),e?"success":"error"}return null},a.validateLocalUsername=function(){if(a.state.userF){var e=Oe(a.state.username);return e&&a.setState({userF:!1}),e?"success":"error"}return null},a.validateLocalPassword=function(){if(a.state.passF){var e=Ce(a.state.password);return e&&a.setState({passF:!1}),e?"success":"error"}return null},a.confirmLocalPassword=function(){var e=a.state,t=e.password,n=e.password2;if(a.state.passC&&0===n.length)return"error";if(a.state.passC){var r=we(t,n);return r&&a.setState({passC:!1}),r?"success":"error"}return null},a.clear=function(){a.setState(Object(G.a)({},Ke))},a}return Object(T.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){var e=this,t=this.props.locale;return r.a.createElement("div",{style:{paddingTop:"3vh"}},r.a.createElement(Be.a,{horizontal:!0,onSubmit:function(t){return e.onSubmit(t)}},r.a.createElement(fe.a,{controlId:"formHorizontalName",validationState:this.validateLocalName(),onBlur:function(){return e.setState({nameF:!0})},onFocus:function(){return e.setState({nameF:!1})}},r.a.createElement(Ee.a,{componentClass:Re.a,sm:2},t.staff.name),r.a.createElement(Ee.a,{sm:4},r.a.createElement(ye.a,{type:"Text",placeholder:t.staff.name,value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}}),this.state.nameF&&r.a.createElement(ve.a,null,t.HELP.name))),r.a.createElement(fe.a,null,r.a.createElement(he.a,null,r.a.createElement(Ee.a,{xs:2,smOffset:2},r.a.createElement(ze.a,null,r.a.createElement(Ve.a,{componentClass:Qe.a.Button,id:"input-dropdown-addon",title:"Security Level",key:this.state.level,onSelect:function(t){return e.setState({level:t})}},t.staff.LEVEL.map(function(e,t){return r.a.createElement(V.a,{eventKey:t,active:!0},e)})))),r.a.createElement(Ee.a,{xs:4,xsOffset:2,smOffset:0},r.a.createElement("h5",null,"".concat(t.commonInfo.selected," ").concat(t.staff.LEVEL[parseInt(this.state.level)]))))),r.a.createElement(fe.a,{controlId:"formHorizontalEmail",validationState:this.validateLocalEmail(),onBlur:function(){return e.setState({emailF:!0})}},r.a.createElement(Ee.a,{componentClass:Re.a,sm:2},t.staff.email),r.a.createElement(Ee.a,{sm:4},r.a.createElement(ye.a,{type:"Email",placeholder:t.staff.email,value:this.state.email,onChange:function(t){return e.setState({email:t.target.value})}}),this.state.emailF&&r.a.createElement(ve.a,null,t.HELP.email))),r.a.createElement(fe.a,{controlId:"formHorizontalUsername",validationState:this.validateLocalUsername(),onBlur:function(){return e.setState({userF:!0})}},r.a.createElement(Ee.a,{componentClass:Re.a,sm:2},t.staff.username),r.a.createElement(Ee.a,{sm:4},r.a.createElement(ye.a,{type:"Username",placeholder:t.staff.username,value:this.state.username,onChange:function(t){return e.setState({username:t.target.value})}}),this.state.userF&&r.a.createElement(ve.a,null,t.HELP.username))),r.a.createElement(fe.a,{controlId:"formHorizontalPassword",validationState:this.validateLocalPassword(),onBlur:function(){return e.setState({passF:!0})}},r.a.createElement(Ee.a,{componentClass:Re.a,sm:2},t.staff.password),r.a.createElement(Ee.a,{sm:4},r.a.createElement(ye.a,{type:"Password",placeholder:t.staff.password,value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})}}),this.state.passF&&r.a.createElement(ve.a,null,t.HELP.password))),r.a.createElement(fe.a,{controlId:"formHorizontalConfirmPassword",validationState:this.confirmLocalPassword(),onBlur:function(){return e.setState({passC:!0})}},r.a.createElement(Ee.a,{componentClass:Re.a,sm:2},t.staff.repassword),r.a.createElement(Ee.a,{sm:4},r.a.createElement(ye.a,{type:"Password",placeholder:t.staff.repassword,value:this.state.password2,onChange:function(t){return e.setState({password2:t.target.value})}}),this.state.passC&&r.a.createElement(ve.a,null,t.HELP.confirmPass))),r.a.createElement(fe.a,null,r.a.createElement(he.a,null,r.a.createElement("hr",null),r.a.createElement(Ee.a,{smOffset:2,sm:2},r.a.createElement(be.a,{type:"submit",bsStyle:"success",block:!0,disabled:this.props.disabled},t.btns.submit)),r.a.createElement(Ee.a,{sm:2},r.a.createElement(be.a,{bsStyle:"warning",onClick:function(){return e.clear()},block:!0,disabled:this.props.disabled},t.btns.clear))))))}}]),t}(r.a.Component)),Je=a(270),Xe=J(function(e){var t=e.staff,a=e.locale;return r.a.createElement("div",null,r.a.createElement(Je.a,{bsStyle:"primary"},r.a.createElement(Je.a.Heading,null,t.name),r.a.createElement(Je.a.Body,null,"".concat(a.staff.level,": ").concat(a.staff.LEVEL[t.level])),r.a.createElement(Je.a.Body,null,"".concat(a.staff.email,": ").concat(t.email))))}),Ze=J(function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(L.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(r)))).state={name:a.props.staff.name,level:+a.props.staff.level},a}return Object(T.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.staff,n=t.onUpdateLevel,l=t.deleteStaff,s=t.locale,c=t.userName,o=this.state.level,i=+a.level;return r.a.createElement("div",null,r.a.createElement(he.a,null,r.a.createElement(Ee.a,{sm:5},r.a.createElement(Xe,{staff:a}))),r.a.createElement(he.a,null,r.a.createElement(Ee.a,{sm:5},r.a.createElement(Qe.a,null,r.a.createElement(Ve.a,{componentClass:Qe.a.Button,id:"input-dropdown-addon",title:s.staff.updateSecurityLvl,eventKey:o,onSelect:function(t){return e.setState({level:+t})},block:!0},s.staff.LEVEL.map(function(e,t){return r.a.createElement(V.a,{eventKey:t,key:t,active:t===o},e)}))))),r.a.createElement(he.a,null,r.a.createElement(Ee.a,{sm:5},c!==a.name&&r.a.createElement(be.a,{bsStyle:"success",disabled:(o===i||this.props.disabled)&&!0,onClick:function(){return n(o)},block:!0}," ",o===i?s.staff.LEVEL[o]:"".concat(s.btns.updateLvl," ").concat(s.staff.LEVEL[o])),c!==a.name&&r.a.createElement(be.a,{bsStyle:"danger",onClick:function(){return l()},disabled:this.props.disabled},s.btns.delete))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.name!==e.staff.name?{level:+e.staff.level,name:e.staff.name}:t}}]),t}(r.a.Component)),$e=J(function(e){function t(e){var a;return Object(P.a)(this,t),(a=Object(L.a)(this,Object(j.a)(t).call(this,e))).handleSelect=a.handleSelect.bind(Object(ie.a)(Object(ie.a)(a))),a.state={key:1},a}return Object(T.a)(t,e),Object(I.a)(t,[{key:"handleSelect",value:function(e){this.setState({key:e})}},{key:"render",value:function(){var e=this.props,t=e.staff,a=e.locale;return r.a.createElement(He.a,{eventKey:this.state.key,onSelect:this.handleSelect,id:"controlled-tab-example"},r.a.createElement(Ue.a,{eventKey:1,title:a.staff.staffDetails},r.a.createElement("div",{style:{paddingTop:"3vh"}},null!=t&&r.a.createElement(Ze,this.props))),r.a.createElement(Ue.a,{eventKey:2,title:a.staff.newStaff},r.a.createElement(de,{level:3},r.a.createElement(Ye,{disabled:this.props.disabled,onSubmit:this.props.onSubmit}))))}}]),t}(r.a.Component)),Ge=function(e){var t=e.name,a=e.getStaff,n=e.id,l=e.iselected;return r.a.createElement("div",{onClick:function(e){return a(n)}},r.a.createElement(Je.a,{bsStyle:l?"success":"info"},r.a.createElement(Je.a.Heading,null,t)))},We=function(e){return{type:"fetch_staff",payload:e}},et=[{level:3,active:!0,_id:"5bb7198fe61d4a7",name:"Demo: David",username:"thedrunkingpig",password:"$2a$10$YetGNQ7h0.t.WZBI1O1EIe",email:"mullxxxxxxxxxxxxxxxxx@hotmail.com"},{level:2,active:!0,_id:"5bb7456d4a7",name:"Demo: Michaela",username:"thedrunkingpig",password:"$2a.t.WZBI1O1EIe",email:"m23xxxxx@hotmail.com"},{level:1,active:!0,_id:"5bb73211d4a7",name:"Demo: Euan",username:"thedrunkingpig",password:"$2a$10$YetGNO1EIe",email:"123x@hotmail.com"}],tt=function(){return function(e,t){"Dummy Account"===t().auth.staff.name?(e({type:"start_loader"}),setTimeout(function(){e(We(et)),e({type:"stop_loader"})},3e3)):e(at())}},at=function(){return function(e,t){return e({type:"start_loader"}),fetch("/staff",{headers:{authorization:t().auth.token}}).then(function(e){return e.json()}).then(function(t){t.err?t.err.errmsg?e(W(t.err.errmsg,ae)):e(W(t.err,ae)):e(We(t))}).then(function(){e({type:"stop_loader"})}).catch(function(t){return e(W(t.errmsg,ae))})}},nt=function(e){return function(t,a){return t({type:"start_loader"}),fetch("/signup",{method:"POST",credentials:"include",mode:"cors",headers:{"Content-Type":"application/json",authorization:a().auth.token},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){e.err?(e.err.errmsg?t(W(e.err.errmsg,ae)):t(W(e.err,ae)),t({type:"stop_loader"})):(t(W("staff_created",ne)),t(tt()))}).then(function(){t({type:"stop_loader"})}).catch(function(e){t({type:"stop_loader"}),t(W(e.errmsg,ae))})}},rt=function(e){return function(t,a){return t({type:"start_loader"}),fetch("/staff",{method:"DELETE",credentials:"include",mode:"cors",headers:{"Content-Type":"application/json",authorization:a().auth.token},body:JSON.stringify({id:e})}).then(function(e){return e.json()}).then(function(e){e.err?(t({type:"stop_loader"}),t(W(e.err,ae))):(t(W("staff_deleted",ne)),t(tt()))}).then(function(){t({type:"stop_loader"})}).catch(function(e){t({type:"stop_loader"}),t(W(e.errmsg,ae))})}},lt=function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(L.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(r)))).state={allStaff:[],selectedStaff:""},a.getStaff=function(e){var t=a.state.allStaff.filter(function(t){return t._id===e});a.setState({selectedStaff:t[0]})},a.isSelected=function(e){return null!=a.state.selectedStaff&&e===a.state.selectedStaff._id},a.onSubmit=function(e){a.props.createStaff(e)},a.onUpdateLevel=function(e){a.props.updateLevel(a.state.selectedStaff._id,e)},a.deleteStaff=function(){a.props.deleteStaffMember(a.state.selectedStaff._id)},a}return Object(T.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){this.props.allStaff()}},{key:"render",value:function(){var e=this,t=this.state.allStaff;return r.a.createElement("div",{style:{paddingTop:"3vh"}},r.a.createElement(Ee.a,{sm:2},t.length>0&&t.map(function(t){return r.a.createElement(Ge,{name:t.name,getStaff:e.getStaff,id:t._id,key:t._id,iselected:e.isSelected(t._id)})})),r.a.createElement(Ee.a,{sm:10},r.a.createElement($e,{disabled:this.props.isLoading,userName:this.props.name,staff:this.state.selectedStaff,deleteStaff:this.deleteStaff,onSubmit:this.onSubmit,onUpdateLevel:this.onUpdateLevel})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.staff!==t.allStaff?{allStaff:e.staff,selectedStaff:e.staff[0]}:t}}]),t}(r.a.Component),st=Object(c.b)(function(e){return{name:e.auth.staff.name,staff:e.staff,isLoading:e.spinner.isLoading}},function(e){return{allStaff:function(){return e(tt())},createStaff:function(t){return e(function(e){return function(t,a){if("Dummy Account"===a().auth.staff.name){if(0===3*Math.random()+0)switch(3*Math.random()+0){case 0:return void t(W("DEMO_STAFF_EXISTS",ae));case 1:return void t(W("DEMO_STAFF_INVALID_EMAIL",ae));default:return void t(W("DEMO_STAFF_EMAIL_EXISTS",ae))}else t(W("DEMO_STAFF_CREATED",ne));t({type:"stop_loader"})}else t(nt(e))}}(t))},updateLevel:function(t,a){return e(function(e,t){return function(a,n){"Dummy Account"===n().auth.staff.name?(a({type:"start_loader"}),setTimeout(function(){a(W("DEMO_STAFF_LEVEL",ne)),a({type:"stop_loader"})},3e3)):a(nt(e,t))}}(t,a))},deleteStaffMember:function(t){return e(function(e){return function(t,a){"Dummy Account"===a().auth.staff.name?(t({type:"start_loader"}),setTimeout(function(){t(W("DEMO_STAFF_DELETED",ne)),t({type:"stop_loader"})},3e3)):t(rt(e))}}(t))}}})(lt),ct=a(267),ot=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],it={name:"",email:"",phone:"",wechat:"",dob:"",sex:!0,address:"",type:0,day:1,month:0,year:1945,nameF:!1,emailF:!1,phoneF:!1,wechatF:!1,addF:!1},ut=J(function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(L.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",email:"",phone:"",wechat:"",dob:"",sex:!0,address:"",type:0,day:1,month:0,year:1945,nameF:!1,emailF:!1,phoneF:!1,wechatF:!1,addF:!1},a.onSubmit=function(e){e.preventDefault();var t=a.state,n=t.name,r=t.email,l=t.phone,s=t.wechat,c=t.type,o=t.sex,i=t.address,u=t.day,m=t.month,d=t.year;if(a.fullValidation()){var p=new Date(d,m,u);a.props.onSubmit({name:n,email:r,phone:l,wechat:s,type:c,dob:p,sex:o,address:i})}else alert("Fix your mistakes!")},a.fullValidation=function(){return!!(ge(a.state.name)&&ge(a.state.wechat)&&Se(a.state.email)&&_e(a.state.phone))},a.validateLocalName=function(){if(a.state.nameF){var e=ge(a.state.name);return e&&a.setState({nameF:!1}),e?"success":"error"}return null},a.validateLocalWechat=function(){if(a.state.wechatF){var e=ge(a.state.wechat);return e&&a.setState({wechatF:!1}),e?"success":"error"}return null},a.validateLocalEmail=function(){if(a.state.emailF){var e=Se(a.state.email);return e&&a.setState({emailF:!1}),e?"success":"error"}return null},a.validateLocalAddress=function(){if(a.state.addF){var e=Oe(a.state.address);return e&&a.setState({addF:!1}),e?"success":"error"}return null},a.validateLocalPhone=function(){if(a.state.phoneF){var e=_e(a.state.phone);return e&&a.setState({phoneF:!1}),e?"success":"error"}return null},a.clear=function(){a.setState(Object(G.a)({},it))},a.calculateDays=function(){var e=a.state.month,t=0;t=[3,5,8,10].includes(e)?30:[0,2,4,6,7,9,11].includes(e)?31:28;for(var n=[],r=0;r<t;r++)n.push(r);return n},a.createYears=function(){for(var e=[],t=(new Date).getFullYear(),a=1945;a<t+1;a++)e.push(a);return e},a}return Object(T.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){var e=this,t=this.calculateDays(),a=this.createYears(),n=this.props.locale;return r.a.createElement("div",{style:{paddingTop:"3vh"}},r.a.createElement(Be.a,{horizontal:!0,onSubmit:function(t){return e.onSubmit(t)}},r.a.createElement(he.a,null,r.a.createElement(Ee.a,{xs:6},r.a.createElement(fe.a,{controlId:"formHorizontalName",validationState:this.validateLocalName(),onBlur:function(){return e.setState({nameF:!0})},onFocus:function(){return e.setState({nameF:!1})}},r.a.createElement(Ee.a,{componentClass:Re.a,sm:2},n.customer.name),r.a.createElement(Ee.a,{sm:6},r.a.createElement(ye.a,{type:"Text",placeholder:n.customer.name,value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}}),this.state.nameF&&r.a.createElement(ve.a,null,n.HELP.name))),r.a.createElement(fe.a,{controlId:"formHorizontalEmail",validationState:this.validateLocalEmail(),onBlur:function(){return e.setState({emailF:!0})}},r.a.createElement(Ee.a,{componentClass:Re.a,sm:2},n.customer.email),r.a.createElement(Ee.a,{sm:6},r.a.createElement(ye.a,{type:"Email",placeholder:n.customer.email,value:this.state.email,onChange:function(t){return e.setState({email:t.target.value})}}),this.state.emailF&&r.a.createElement(ve.a,null,n.HELP.email))),r.a.createElement(fe.a,{controlId:"formHorizontalPhone",validationState:this.validateLocalPhone(),onBlur:function(){return e.setState({phoneF:!0})},onFocus:function(){return e.setState({phoneF:!1})}},r.a.createElement(Ee.a,{componentClass:Re.a,sm:2},n.customer.phone),r.a.createElement(Ee.a,{sm:6},r.a.createElement(ye.a,{type:"Number",placeholder:n.customer.phone,value:this.state.phone,onChange:function(t){return e.setState({phone:t.target.value})}}),this.state.phoneF&&r.a.createElement(ve.a,null,n.HELP.phone))),r.a.createElement(fe.a,{controlId:"formHorizontalWechat",validationState:this.validateLocalWechat(),onBlur:function(){return e.setState({wechatF:!0})},onFocus:function(){return e.setState({wechatF:!1})}},r.a.createElement(Ee.a,{componentClass:Re.a,sm:2},n.customer.wechat),r.a.createElement(Ee.a,{sm:6},r.a.createElement(ye.a,{type:"Text",placeholder:n.customer.wechat,value:this.state.wechat,onChange:function(t){return e.setState({wechat:t.target.value})}}),this.state.wechatF&&r.a.createElement(ve.a,null,n.HELP.wechat))),r.a.createElement(fe.a,null,r.a.createElement(he.a,null,r.a.createElement(Ee.a,{xs:4,smOffset:1},r.a.createElement(ye.a,{componentClass:"select",placeholder:"select",onChange:function(t){return e.setState({type:t.target.value})}},n.customer.CUSTOMERTYPES.map(function(e,t){return r.a.createElement("option",{value:t,key:t},e)}))),r.a.createElement(Ee.a,{xs:4,xsOffset:1,smOffset:1},r.a.createElement("h5",null,"".concat(n.customer.selected," ").concat(n.customer.CUSTOMERTYPES[parseInt(this.state.type)])))))),r.a.createElement(Ee.a,{xs:6},r.a.createElement(fe.a,{controlId:"formHorizontalAddress",validationState:this.validateLocalAddress(),onBlur:function(){return e.setState({addF:!0})},onFocus:function(){return e.setState({addF:!1})}},r.a.createElement(Ee.a,{componentClass:Re.a,sm:2},n.customer.address),r.a.createElement(Ee.a,{sm:6},r.a.createElement(ye.a,{type:"Text",placeholder:n.customer.address,value:this.state.address,onChange:function(t){return e.setState({address:t.target.value})}}),this.state.addF&&r.a.createElement(ve.a,null,n.HELP.username))),r.a.createElement(fe.a,{controlId:"formHorizontalSex"},r.a.createElement(Ee.a,{componentClass:Re.a,sm:2},n.customer.sex),r.a.createElement(Ee.a,{sm:6},r.a.createElement(ct.a,{name:"radioGroup",defaultChecked:!0,inline:!0,onChange:function(t){return e.setState({sex:!0})}},n.customer.male)," ",r.a.createElement(ct.a,{name:"radioGroup",inline:!0,onChange:function(t){return e.setState({sex:!1})}},n.customer.female)," ")),r.a.createElement(fe.a,null,r.a.createElement(he.a,null,r.a.createElement(Ee.a,{componentClass:Re.a,sm:2},"DoB"),r.a.createElement(Ee.a,{xs:3},r.a.createElement(ye.a,{componentClass:"select",placeholder:"select",onChange:function(t){return e.setState({month:t.target.value})}},ot.map(function(e,t){return r.a.createElement("option",{value:t,key:t},e)}))),r.a.createElement(Ee.a,{xs:3},r.a.createElement(ye.a,{componentClass:"select",placeholder:"select",onChange:function(t){return e.setState({day:t.target.value+1})}},t.map(function(e,t){return r.a.createElement("option",{value:t,key:t},e+1)}))),r.a.createElement(Ee.a,{xs:3},r.a.createElement(ye.a,{componentClass:"select",placeholder:"select",onChange:function(t){return e.setState({year:t.target.value})}},a.map(function(e,t){return r.a.createElement("option",{value:e,key:t},e)}))))))),r.a.createElement(he.a,null,r.a.createElement(Ee.a,{xs:12},r.a.createElement("hr",null),r.a.createElement(fe.a,null,r.a.createElement(he.a,null,r.a.createElement(Ee.a,{smOffset:2,sm:4},r.a.createElement(be.a,{type:"submit",bsStyle:"success",block:!0,disabled:this.props.disabled},n.btns.submit)),r.a.createElement(Ee.a,{sm:4},r.a.createElement(be.a,{bsStyle:"warning",onClick:function(){return e.clear()},block:!0,disabled:this.props.disabled},n.btns.clear))))))))}}]),t}(r.a.Component)),mt=J(function(e){var t=e.customer,a=e.locale;return r.a.createElement("div",null,r.a.createElement(Je.a,{bsStyle:"primary"},r.a.createElement(Je.a.Heading,null,t.name),r.a.createElement(Je.a.Body,null,"".concat(a.customer.phone,": ").concat(t.phone)),r.a.createElement(Je.a.Body,null,"".concat(a.customer.wechat,": ").concat(t.wechat)),r.a.createElement(Je.a.Body,null,"".concat(a.customer.email,": ").concat(t.email)),r.a.createElement(Je.a.Body,null,"".concat(a.customer.type,": ").concat(a.customer.CUSTOMERTYPES[t.customerType]))))}),dt=function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(L.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(r)))).state={name:a.props.customer.name},a}return Object(T.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){var e=this.props.customer;return r.a.createElement("div",null,r.a.createElement(he.a,null,r.a.createElement(Ee.a,{sm:5},r.a.createElement(mt,{customer:e}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.name!==e.customer.name?{name:e.customer.name}:t}}]),t}(r.a.Component),pt=J(function(e){function t(e,a){var n;return Object(P.a)(this,t),(n=Object(L.a)(this,Object(j.a)(t).call(this,e,a))).handleSelect=n.handleSelect.bind(Object(ie.a)(Object(ie.a)(n))),n.state={key:0},n}return Object(T.a)(t,e),Object(I.a)(t,[{key:"handleSelect",value:function(e){this.setState({key:e})}},{key:"render",value:function(){var e=this.props,t=e.customer,a=e.locale;return r.a.createElement(He.a,{eventKey:this.state.key,onSelect:this.handleSelect,id:"controlled-tab-example"},r.a.createElement(Ue.a,{eventKey:1,title:a.customer.customerDetails},r.a.createElement("div",{style:{paddingTop:"3vh"}},null!=t&&r.a.createElement(dt,this.props))),r.a.createElement(Ue.a,{eventKey:2,title:a.customer.newCustomer},r.a.createElement(de,{level:3},r.a.createElement(ut,{disabled:this.props.disabled,onSubmit:this.props.onSubmit}))))}}]),t}(r.a.Component)),ft=function(e){return{type:"fetch_customers",payload:e}},ht=[{sex:!0,customerType:0,purchaseTtl:1654,_id:"5bb9e442eb3d5b002a42aa4b",name:"Demo: Chris",email:"Chris@Chris.com",phone:"12634567897",wechat:"chrischris",dob:"1962-10-28T16:00:00.000Z",address:"12432132i"},{sex:!1,customerType:2,purchaseTtl:0,_id:"5bb9e4422aa4b",name:"Demo: Michelle",email:"Michelle@someEmail.com",phone:"12634567897",wechat:"michelle_123",dob:"1962-10-28T16:00:00.000Z",address:"12432132i"},{sex:!0,customerType:0,purchaseTtl:9999,_id:"5bb9wwwwwwwwwwwwwwwwwwwwwwwwwwwwfdsa4b",name:"Demo: Finlay",email:"finlay@finlay.com",phone:"12634567897",wechat:"finlayxxxxx",dob:"1962-10-28T16:00:00.000Z",address:"124"}],Et=function(){return function(e,t){"Dummy Account"===t().auth.staff.name?(e({type:"start_loader"}),setTimeout(function(){e(ft(ht)),e({type:"stop_loader"})},3e3)):e(yt())}},yt=function(){return function(e,t){return e({type:"start_loader"}),fetch("/customer/all",{headers:{authorization:t().auth.token}}).then(function(e){return e.json()}).then(function(t){t.err?(t.err.errmsg?e(W(t.err.errmsg,ae)):e(W(t.err,ae)),e({type:"stop_loader"})):e(ft(t))}).then(function(){e({type:"stop_loader"})}).catch(function(t){e(W(t.errmsg,ae)),e({type:"stop_loader"})})}},vt=function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(L.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(r)))).state={allCust:[],selectedCust:""},a.getStaff=function(e){var t=a.state.allCust.filter(function(t){return t._id===e});a.setState({selectedCust:t[0]})},a.isSelected=function(e){return null!=a.state.selectedCust&&e===a.state.selectedCust._id},a.onSubmit=function(e){a.props.createCustomer(e,a.props.token)},a.onUpdate=function(e){alert("Customer ".concat(a.state.selectedCust.name," level will be updated to ").concat(e))},a.deleteCustomer=function(){alert("Will delete ".concat(a.state.selectedCust.name))},a}return Object(T.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchCustomers()}},{key:"render",value:function(){var e=this,t=this.state.allCust;return r.a.createElement("div",{style:{paddingTop:"3vh"}},r.a.createElement(Ee.a,{sm:2},t.length>0&&t.map(function(t){return r.a.createElement(Ge,{name:t.name,getStaff:e.getStaff,id:t._id,key:t._id,iselected:e.isSelected(t._id)})})),r.a.createElement(Ee.a,{sm:10},r.a.createElement(pt,{disabled:this.props.isLoading,customer:this.state.selectedCust,deleteCustomer:this.deleteCustomer,onSubmit:this.onSubmit,onUpdate:this.onUpdate})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.customers!==t.allCust){var a=e.customers.length;return{allCust:e.customers,selectedCust:a>0?e.customers[0]:""}}return t}}]),t}(r.a.Component),bt=Object(c.b)(function(e){return{customers:e.customers,isLoaded:e.spinner.isLoading}},function(e){return{fetchCustomers:function(){return e(Et())},createCustomer:function(t){return e(function(e){return function(t,a){if("Dummy Account"===a().auth.staff.name){if(0===3*Math.random()+0)switch(3*Math.random()+0){case 0:return void t(W("DEMO_CUSTOMER_EXISTS",ae));case 1:return void t(W("DEMO_INVALID_EMAIL",ae));default:return void t(W("DEMO_EMAIL_EXISTS",ae))}else t(W("DEMO_CUSTOMER_ADDED",ne));t({type:"stop_loader"})}else t(yt(e))}}(t))}}})(vt),St=J(function(e){var t=e.inventory,a=t.productType,n=t.name,l=t.description,s=t.quantity,c=t.retailPrice,o=e.locale;return r.a.createElement("div",null,r.a.createElement(Ee.a,null,r.a.createElement(Je.a,{bsStyle:"info"},r.a.createElement(Je.a.Heading,null,r.a.createElement("b",null,n)),r.a.createElement(Je.a.Body,null,r.a.createElement(he.a,null,r.a.createElement(Ee.a,{md:4},o.inventory.type),r.a.createElement(Ee.a,{md:8},a)),r.a.createElement(he.a,null,r.a.createElement("hr",null),r.a.createElement(Ee.a,{md:4},o.inventory.description),r.a.createElement(Ee.a,{md:8},l)),r.a.createElement(he.a,null,r.a.createElement("hr",null),r.a.createElement(Ee.a,{md:4},o.inventory.quantity),r.a.createElement(Ee.a,{md:8},s)),r.a.createElement(he.a,null,r.a.createElement("hr",null),r.a.createElement(Ee.a,{md:4},o.inventory.retailPrice),r.a.createElement(Ee.a,{md:8},c," ",o.commonInfo.rmb))))))}),gt=J(function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(L.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(r)))).state={newPrice:0},a}return Object(T.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.inventory,n=t.changePrice,l=t.locale,s=a.costPrice,c=a.retailPrice;return r.a.createElement("div",null,r.a.createElement(Ee.a,null,r.a.createElement(Je.a,{bsStyle:"info"},r.a.createElement(Je.a.Heading,null,r.a.createElement("b",null,l.inventory.pricing)),r.a.createElement(Je.a.Body,null,r.a.createElement(de,{level:3},r.a.createElement(he.a,null,r.a.createElement(Ee.a,{md:4},l.inventory.costPrice,":"),r.a.createElement(Ee.a,{md:8},s," rmb"),r.a.createElement("hr",null))),r.a.createElement(he.a,null,r.a.createElement(Ee.a,{md:4},l.inventory.retailPrice,":"),r.a.createElement(Ee.a,{md:4},c," ",l.commonInfo.rmb),r.a.createElement(Ee.a,{md:4},r.a.createElement(fe.a,{controlId:"formHorizontalName"},r.a.createElement(ye.a,{type:"Number",placeholder:this.state.newPrice,onChange:function(t){return e.setState({newPrice:t.target.value})}}),r.a.createElement(be.a,{type:"submit",bsStyle:"success",block:!0,disabled:this.props.disabled,onClick:function(){return n(e.state.newPrice)}},l.btns.updatePrc))),r.a.createElement("hr",null)),r.a.createElement(de,{level:3},r.a.createElement(he.a,null,r.a.createElement(Ee.a,{md:4},l.inventory.profit,":"),r.a.createElement(Ee.a,{md:8},c-s," ",l.commonInfo.rmb)))))))}}]),t}(r.a.Component)),_t=J(function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(L.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(r)))).state={newQty:1},a}return Object(T.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.inventory,n=t.changeQuantity,l=t.locale,s=a.quantity;return r.a.createElement(Ee.a,null,r.a.createElement(Je.a,{bsStyle:function(e){return 0===e?"danger":e<10?"warning":"success"}(s)},r.a.createElement(Je.a.Heading,null,r.a.createElement("b",null,l.inventory.changeQuantity,":")),r.a.createElement(Je.a.Body,null,r.a.createElement(he.a,null,r.a.createElement(Ee.a,{md:4},l.inventory.currentQuantity,":"),r.a.createElement(Ee.a,{md:4},s),r.a.createElement(Ee.a,{md:4},r.a.createElement(fe.a,{controlId:"formHorizontalQty"},r.a.createElement(ye.a,{type:"Number",placeholder:this.state.newQty,onChange:function(t){return e.setState({newQty:t.target.value})}}),r.a.createElement(be.a,{type:"submit",bsStyle:"success",disabled:this.props.disabled,block:!0,onClick:function(){return n(e.state.newQty)}},l.btns.updateQty)))))))}}]),t}(r.a.Component)),Ot=J(function(e){var t=e.inventory,a=t.supplierName,n=t.supplierAddress,l=t.supplierPhone,s=e.locale;return r.a.createElement("div",null,r.a.createElement(Ee.a,null,r.a.createElement(Je.a,{bsStyle:"info"},r.a.createElement(Je.a.Heading,null,r.a.createElement("b",null,s.inventory.suppDetails)),r.a.createElement(Je.a.Body,null,r.a.createElement(he.a,null,r.a.createElement(Ee.a,{md:4},s.inventory.suppName,":"),r.a.createElement(Ee.a,{md:8},a)),r.a.createElement(he.a,null,r.a.createElement("hr",null),r.a.createElement(Ee.a,{md:4},s.inventory.suppPhone,":"),r.a.createElement(Ee.a,{md:8},l)),r.a.createElement(he.a,null,r.a.createElement("hr",null),r.a.createElement(Ee.a,{md:4},s.inventory.suppAdd,":"),r.a.createElement(Ee.a,{md:8},n))))))}),Ct={name:"",type:"",description:"",supplierName:"",supplierPhone:"",supplierAddress:"",quantity:1,costPrice:1,retailPrice:2,nameF:!1,typeF:!1,descF:!1,supNF:!1,supPF:!1,supAF:!1},wt=J(function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(L.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",productType:"",description:"",supplierName:"",supplierPhone:"",supplierAddress:"",quantity:1,costPrice:1,retailPrice:2,nameF:!1,typeF:!1,descF:!1,supNF:!1,supPF:!1,supAF:!1},a.validateLocalName=function(){if(a.state.nameF){var e=ge(a.state.name);return e&&a.setState({nameF:!1}),e?"success":"error"}return null},a.validateLocalType=function(){if(a.state.typeF){var e=ge(a.state.productType);return e&&a.setState({typeF:!1}),e?"success":"error"}return null},a.validateLocalSName=function(){if(a.state.supNF){var e=ge(a.state.supplierName);return e&&a.setState({supNF:!1}),e?"success":"error"}return null},a.validateLocalSNumber=function(){if(a.state.supPF){var e=_e(a.state.supplierPhone);return e&&a.setState({supPF:!1}),e?"success":"error"}return null},a.validateLocalSAddress=function(){if(a.state.supAF){var e=ge(a.state.supplierAddress);return e&&a.setState({supAF:!1}),e?"success":"error"}return null},a.clear=function(){return a.setState(Object(G.a)({},Ct))},a.onSubmit=function(e){e.preventDefault();var t=a.state,n=t.name,r=t.productType,l=t.description,s=t.supplierName,c=t.supplierPhone,o=t.supplierAddress,i=t.quantity,u=t.costPrice,m=t.retailPrice;a.fullValidation()?a.props.onSubmit({name:n,productType:r,description:l,supplierName:s,supplierPhone:c,supplierAddress:o,quantity:i,costPrice:u,retailPrice:m}):alert("Fix your mistakes!")},a.fullValidation=function(){return!!(ge(a.state.name)&&ge(a.state.productType)&&ge(a.state.supplierName)&&_e(a.state.supplierPhone)&&ge(a.state.supplierAddress))},a}return Object(T.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){var e=this,t=this.props.locale;return r.a.createElement("div",{style:{paddingTop:"3vh"}},r.a.createElement(Be.a,{horizontal:!0,onSubmit:function(t){return e.onSubmit(t)}},r.a.createElement(he.a,null,r.a.createElement(Ee.a,{xs:4},r.a.createElement(fe.a,{controlId:"formHorizontalName",validationState:this.validateLocalName(),onBlur:function(){return e.setState({nameF:!0})},onFocus:function(){return e.setState({nameF:!1})}},r.a.createElement(Ee.a,{componentClass:Re.a,xs:4},t.inventory.name),r.a.createElement(Ee.a,{xs:8},r.a.createElement(ye.a,{type:"Text",placeholder:t.inventory.name,value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}}),this.state.nameF&&r.a.createElement(ve.a,null,t.HELP.name))),r.a.createElement(fe.a,{controlId:"formHorizontalType",validationState:this.validateLocalType(),onBlur:function(){return e.setState({typeF:!0})},onFocus:function(){return e.setState({typeF:!1})}},r.a.createElement(Ee.a,{componentClass:Re.a,xs:4},t.inventory.type),r.a.createElement(Ee.a,{xs:8},r.a.createElement(ye.a,{type:"Text",placeholder:t.inventory.type,value:this.state.productType,onChange:function(t){return e.setState({productType:t.target.value})}}),this.state.typeF&&r.a.createElement(ve.a,null,t.HELP.name))),r.a.createElement(fe.a,{controlId:"formHorizontalDescription"},r.a.createElement(Ee.a,{componentClass:Re.a,xs:4},t.inventory.description),r.a.createElement(Ee.a,{xs:8},r.a.createElement(ye.a,{type:"Text",placeholder:t.inventory.description,value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}})))),r.a.createElement(Ee.a,{xs:8},r.a.createElement(fe.a,{controlId:"formHorizontalSName",validationState:this.validateLocalSName(),onBlur:function(){return e.setState({supNF:!0})},onFocus:function(){return e.setState({supNF:!1})}},r.a.createElement(Ee.a,{componentClass:Re.a,xs:3},t.inventory.suppName),r.a.createElement(Ee.a,{xs:6},r.a.createElement(ye.a,{type:"Text",placeholder:t.inventory.supName,value:this.state.supplierName,onChange:function(t){return e.setState({supplierName:t.target.value})}}),this.state.supNF&&r.a.createElement(ve.a,null,t.HELP.name)))),r.a.createElement(Ee.a,{xs:8},r.a.createElement(fe.a,{controlId:"formHorizontalSPhone",validationState:this.validateLocalSNumber(),onBlur:function(){return e.setState({supPF:!0})},onFocus:function(){return e.setState({supPF:!1})}},r.a.createElement(Ee.a,{componentClass:Re.a,xs:3},t.inventory.suppPhone),r.a.createElement(Ee.a,{xs:6},r.a.createElement(ye.a,{type:"Number",placeholder:t.inventory.suppPhone,value:this.state.supplierPhone,onChange:function(t){return e.setState({supplierPhone:t.target.value})}}),this.state.supPF&&r.a.createElement(ve.a,null,t.HELP.phone)))),r.a.createElement(Ee.a,{xs:8},r.a.createElement(fe.a,{controlId:"formHorizontalSAddress",validationState:this.validateLocalSAddress(),onBlur:function(){return e.setState({supAF:!0})},onFocus:function(){return e.setState({supAF:!1})}},r.a.createElement(Ee.a,{componentClass:Re.a,xs:3},t.inventory.suppAdd),r.a.createElement(Ee.a,{xs:6},r.a.createElement(ye.a,{type:"Text",placeholder:t.inventory.suppAdd,value:this.state.spplierA,onChange:function(t){return e.setState({supplierAddress:t.target.value})}}),this.state.supAF&&r.a.createElement(ve.a,null,t.HELP.name))))),r.a.createElement("hr",null),r.a.createElement(he.a,null,r.a.createElement(Ee.a,{xs:6},r.a.createElement(fe.a,{controlId:"formHorizontalQuantity"},r.a.createElement(Ee.a,{componentClass:Re.a,xs:3},t.inventory.quantity),r.a.createElement(Ee.a,{xs:6},r.a.createElement(ye.a,{type:"Number",placeholder:t.inventory.quantity,value:this.state.quantity,onChange:function(t){return e.setState({quantity:t.target.value})}})))),r.a.createElement(Ee.a,{xs:6},r.a.createElement(fe.a,{controlId:"formHorizontalCost"},r.a.createElement(Ee.a,{componentClass:Re.a,xs:3},t.inventory.costPrice),r.a.createElement(Ee.a,{xs:4},r.a.createElement(ye.a,{type:"Number",placeholder:this.state.costPrice,value:this.state.costPrice,onChange:function(t){return e.setState({costPrice:t.target.value})}}))),r.a.createElement(fe.a,{controlId:"formHorizontalRetail"},r.a.createElement(Ee.a,{componentClass:Re.a,xs:3},t.inventory.retailPrice),r.a.createElement(Ee.a,{xs:4},r.a.createElement(ye.a,{type:"Number",placeholder:t.inventory.retailPrice,value:this.state.retailPrice,onChange:function(t){return e.setState({retailPrice:t.target.value})}}))),r.a.createElement(he.a,null,r.a.createElement(Ee.a,{componentClass:Re.a,xs:6,smPull:2},t.inventory.profit," ",+this.state.retailPrice-+this.state.costPrice," ",t.commonInfo.rmb)))),r.a.createElement(fe.a,null,r.a.createElement(he.a,null,r.a.createElement("hr",null),r.a.createElement(Ee.a,{xsOffset:3,xs:2},r.a.createElement(be.a,{type:"submit",bsStyle:"success",block:!0,disabled:this.props.disabled},t.btns.submit)),r.a.createElement(Ee.a,{xs:2},r.a.createElement(be.a,{bsStyle:"warning",onClick:function(){return e.clear()},block:!0,disabled:this.props.disabled},t.btns.clear))))))}}]),t}(r.a.Component)),Ft=J(function(e){function t(e,a){var n;return Object(P.a)(this,t),(n=Object(L.a)(this,Object(j.a)(t).call(this,e,a))).handleSelect=n.handleSelect.bind(Object(ie.a)(Object(ie.a)(n))),n.state={key:0},n}return Object(T.a)(t,e),Object(I.a)(t,[{key:"handleSelect",value:function(e){this.setState({key:e})}},{key:"render",value:function(){var e=this.props.locale;return r.a.createElement(He.a,{eventKey:this.state.key,onSelect:this.handleSelect,id:"controlled-tab-example"},r.a.createElement(Ue.a,{eventKey:1,title:e.inventory.inventoryDetails},r.a.createElement("div",{style:{paddingTop:"3vh"}},r.a.createElement(he.a,null,r.a.createElement(Ee.a,{sm:6},r.a.createElement(St,this.props)),r.a.createElement(Ee.a,{sm:6},r.a.createElement(de,{level:3},r.a.createElement(Ot,this.props)))),r.a.createElement(he.a,null,r.a.createElement(Ee.a,{sm:6},r.a.createElement(de,{level:2},r.a.createElement(_t,this.props))),r.a.createElement(de,{level:2},r.a.createElement(Ee.a,{sm:6},r.a.createElement(gt,this.props)))))),r.a.createElement(Ue.a,{eventKey:2,title:e.inventory.inventoryStatistics},r.a.createElement(de,{level:3},r.a.createElement("div",null,r.a.createElement("h2",null,"COMING SOON!!!"),r.a.createElement("h3",null,"graphs and details about the actual sales")))),r.a.createElement(Ue.a,{eventKey:3,title:e.inventory.newInventory},r.a.createElement(de,{level:3},r.a.createElement(wt,this.props))))}}]),t}(r.a.Component)),Dt=function(e){return{type:"fetch_inventory",payload:e}},Pt=[{description:"Coca cola: red can",img:"",_id:"5bbdfsadsa",productType:"drink",name:"Demo: Classic Cola",costPrice:.3,retailPrice:3,quantity:1e4,supplierName:"Cola inc.",supplierPhone:"2234566787567",supplierAddress:"the moon, 3rd crater to the left"},{description:"Coca cola: black can",img:"",_id:"5bbdf5f5df5f5f5f",productType:"drink",name:"Demo: Cola Zero",costPrice:.3,retailPrice:3,quantity:18,supplierName:"Cola inc.",supplierPhone:"2234566787567",supplierAddress:"the moon, 3rd crater to the left"},{description:"Spicy corn chips",img:"",_id:"5bbdfsads5656565656565",productType:"snack",name:"Demo: Doritos",costPrice:5,retailPrice:10,quantity:50,supplierName:"the Doritos company",supplierPhone:"2234566787567",supplierAddress:"Jupiter"}],It=function(){return function(e,t){"Dummy Account"===t().auth.staff.name?(e({type:"start_loader"}),setTimeout(function(){e(Dt(Pt)),e({type:"stop_loader"})},3e3)):e(Lt())}},Lt=function(){return function(e,t){return e({type:"start_loader"}),fetch("/inventory",{headers:{authorization:t().auth.token}}).then(function(e){return e.json()}).then(function(t){if(t.err)t.err.errmsg?e(W(t.err.errmsg,ae)):e(W(t.err,ae)),e({type:"stop_loader"});else{var a=t.sort(function(e,t){var a=e.quantity,n=t.quantity;return a>n?-1:a<n?1:0});e(Dt(a))}}).then(function(){e({type:"stop_loader"})}).catch(function(t){e({type:"stop_loader"}),e(W(t.errmsg,ae))})}},jt=function(e,t){return function(a,n){return a({type:"start_loader"}),fetch("/inventory",{method:"PUT",credentials:"include",mode:"cors",headers:{"Content-Type":"application/json",authorization:n().auth.token},body:JSON.stringify({id:t,data:Object(G.a)({},e)})}).then(function(e){return e.json()}).then(function(e){e.err?(e.err.errmsg?a(W(e.err.errmsg,ae)):a(W(e.err,ae)),a({type:"stop_loader"})):(a(It()),a(W("inventory_updated",ne)))}).then(function(){a({type:"stop_loader"})}).catch(function(e){a({type:"stop_loader"}),a(W(e.errmsg,ae))})}},Tt=function(e){return function(t,a){return t({type:"start_loader"}),fetch("/inventory",{method:"POST",credentials:"include",mode:"cors",headers:{"Content-Type":"application/json",authorization:a().auth.token},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){e.err?(e.err.errmsg?t(W(e.err.errmsg,ae)):t(W(e.err,ae)),t({type:"stop_loader"})):(t(It()),t(W("inventory_added",ne)))}).then(function(){t({type:"stop_loader"})}).catch(function(e){t({type:"stop_loader"})})}},xt=function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(L.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(r)))).state={allInven:[],selectedInven:""},a.getInventory=function(e){var t=a.state.allInven.filter(function(t){return t._id===e});a.setState({selectedInven:t[0]})},a.isSelected=function(e){return null!=a.state.selectedInven&&e===a.state.selectedInven._id},a.onSubmit=function(e){a.props.addInventory(e)},a.onUpdate=function(e){alert("Inventory ".concat(a.state.selectedInven.name," level will be updated to ").concat(e))},a.onDelete=function(){alert("Will delete ".concat(a.state.selectedInven.name))},a.changePrice=function(e){a.update({retailPrice:e})},a.changeQuantity=function(e){a.update({quantity:e})},a.update=function(e){a.props.updateInventory(e,a.state.selectedInven._id)},a}return Object(T.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchInventory()}},{key:"render",value:function(){var e=this,t=this.state.allInven;return r.a.createElement("div",{style:{paddingTop:"3vh"}},r.a.createElement(he.a,null,r.a.createElement(Ee.a,{sm:2},t.length>0&&t.map(function(t){return r.a.createElement(Ge,{name:t.name,getStaff:e.getInventory,id:t._id,key:t._id,iselected:e.isSelected(t._id)})})),r.a.createElement(Ee.a,{sm:10},r.a.createElement(Ft,{disabled:this.props.isLoading,inventory:this.state.selectedInven,changeQuantity:this.changeQuantity,changePrice:this.changePrice,onDelete:this.onDelete,onSubmit:this.onSubmit,onUpdate:this.onUpdate}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.inventory!==t.allInven){var a=e.inventory.length;return{allInven:e.inventory,selectedInven:a>0?e.inventory[0]:""}}return t}}]),t}(r.a.Component),kt=Object(c.b)(function(e){return{name:e.auth.staff.name,inventory:e.inventory,isLoading:e.spinner.isLoading}},function(e){return{updateInventory:function(t,a){return e(function(e,t){return function(a,n){"Dummy Account"===n().auth.staff.name?(a({type:"start_loader"}),setTimeout(function(){a(W("DEMO_INVENTORY_UPDATED",ne)),a({type:"stop_loader"})},3e3)):a(jt(e,t))}}(t,a))},addInventory:function(t){return e((a=t,function(e,t){"Dummy Account"===t().auth.staff.name?(e({type:"start_loader"}),setTimeout(function(){e(W("DEMO_INVENTORY_ADDED",ne)),e({type:"stop_loader"})},3e3)):e(Tt(a))}));var a},fetchInventory:function(){return e(It())}}})(xt),At=a(148),Nt=a.n(At),Mt=a(141),qt=a(269),Ht=J(function(e){var t=e.title,a=e.phone,n=e.wechat,l=e.id,s=e.setCustomer,c=e.selected,o=e.locale;return r.a.createElement("div",{onClick:function(e){return s(l)}},r.a.createElement(Ee.a,{md:4},r.a.createElement(Je.a,{bsStyle:c?"success":"info"},r.a.createElement(Je.a.Heading,null,r.a.createElement("b",null,t)),r.a.createElement(Je.a.Body,null,r.a.createElement(he.a,null,r.a.createElement(Ee.a,{md:5},o.customer.phone),r.a.createElement(Ee.a,{md:1},a)),r.a.createElement(he.a,null,r.a.createElement(Ee.a,{md:5},o.customer.wechat),r.a.createElement(Ee.a,{md:1},n))))))}),Ut=function(e){var t=e.list,a=e.setCustomer,n=e.selected;e.locale;return r.a.createElement("div",null,t.map(function(e){return r.a.createElement(Ht,{title:e.name,phone:e.phone,wechat:e.wechat,key:e._id,id:e._id,setCustomer:a,selected:n._id===e._id})}))},Bt=J(function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(L.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(r)))).state={cost:a.props.price,quantity:a.props.quantity,requiredQuantity:0},a.increment=function(){var e=a.state.requiredQuantity+1,t=a.state.quantity-1;a.setState({requiredQuantity:e,total:parseFloat(a.props.price)*parseFloat(e),quantity:t},function(){a.props.selectItem(a.props.id,a.state.requiredQuantity,a.state.cost,a.props.title)})},a.decrement=function(){var e=a.state.requiredQuantity-1,t=a.state.quantity+1;a.setState({requiredQuantity:e,total:parseFloat(a.props.price)*parseFloat(e),quantity:t},function(){a.props.selectItem(a.props.id,a.state.requiredQuantity,a.state.cost,a.props.title)})},a.changePrice=function(e){var t=e.target.value;a.setState({cost:t},function(){a.props.selectItem(a.props.id,a.state.requiredQuantity,a.state.cost,a.props.title)})},a.requireStyle=function(){var e=a.props.quantity;return 0===e?"danger":e<10?"warning":"success"},a}return Object(T.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.description,n=e.price,l=e.quantity,s=e.locale;return r.a.createElement("div",null,r.a.createElement(Ee.a,{md:6},r.a.createElement(Je.a,{bsStyle:this.requireStyle()},r.a.createElement(Je.a.Heading,null,t),r.a.createElement(Je.a.Body,null,a,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(he.a,null,r.a.createElement(Ee.a,{xs:8},r.a.createElement("b",null,s.purchase.ppUnit,":")),n),r.a.createElement(he.a,null,r.a.createElement(Ee.a,{xs:8},r.a.createElement("b",null,s.purchase.qtyAvail,":"))," ",this.state.quantity),r.a.createElement(he.a,null,r.a.createElement(Ee.a,{xs:8},r.a.createElement("b",null,s.purchase.required,":"))," ",this.state.requiredQuantity),r.a.createElement(he.a,null,r.a.createElement(Ee.a,{xs:8},r.a.createElement("b",null,s.purchase.ttlPrice,":"))," ",this.state.cost*this.state.requiredQuantity," ",s.commonInfo.rmb),r.a.createElement(he.a,null,l>0&&r.a.createElement("div",null,r.a.createElement(Ee.a,{xs:1,md:2},this.state.requiredQuantity<l&&r.a.createElement(be.a,{bsStyle:"info",onClick:this.increment},"+")),r.a.createElement(Ee.a,{xs:1,md:2},this.state.requiredQuantity>0&&r.a.createElement(be.a,{bsStyle:"warning",onClick:this.decrement},"-")))),l>0&&r.a.createElement(fe.a,{controlId:"formHorizontalName"},r.a.createElement(ye.a,{type:"Number",placeholder:this.state.cost,onChange:this.changePrice}))))))}}]),t}(r.a.Component)),Rt=a(268),zt=J(function(e){var t=e.compiledList,a=e.locale,n=0;return r.a.createElement("div",null,r.a.createElement(Rt.a,{striped:!0,bordered:!0,condensed:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,a.purchase.item),r.a.createElement("th",null,a.purchase.qtyS),r.a.createElement("th",null,a.purchase.price),r.a.createElement("th",null,a.purchase.ttlPrice))),r.a.createElement("tbody",null,t.map(function(e,t){return n+=e.quantity*e.price,r.a.createElement("tr",{key:t},r.a.createElement("td",null,t+1),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.quantity),r.a.createElement("td",null,e.price),r.a.createElement("td",null,e.quantity*e.price))}),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:3},r.a.createElement("b",null,a.purchase.total)),r.a.createElement("td",{colSpan:2},"".concat(n," ").concat(a.commonInfo.rmb))))))}),Vt=function(e){var t=e.list,a=e.selectItem,n=e.compiledList;return r.a.createElement(Mt.a,null,r.a.createElement(Ee.a,{md:8},t.map(function(e){return r.a.createElement(Bt,{key:e._id,title:e.name,description:e.description,price:e.retailPrice,quantity:e.quantity,id:e._id,selectItem:a})})),r.a.createElement(Ee.a,{md:4},r.a.createElement(zt,{compiledList:n})))},Qt=J(function(e){var t=e.customer,a=e.staff,n=e.selectedItems,l=e.confirmOrder,s=e.cancel,c=e.locale,o=e.disabled,i=0,u=0;return r.a.createElement("div",null,r.a.createElement(he.a,null,r.a.createElement(Ee.a,{xs:8,xsOffset:2},r.a.createElement(Rt.a,{bordered:!0,condensed:!0,hover:!0},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("b",null,c.customer.name)),r.a.createElement("td",null,t.name),r.a.createElement("td",null,r.a.createElement("b",null,c.staff.name)),r.a.createElement("td",null,a.name)),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("b",null,c.customer.phone)),r.a.createElement("td",null,t.phone),r.a.createElement("td",null,r.a.createElement("b",null,c.commonInfo.date)),r.a.createElement("td",null,"12-09-2018")),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("b",null,c.customer.wechat)),r.a.createElement("td",null,t.wechat),r.a.createElement("td",null,r.a.createElement("b",null,c.commonInfo.time)),r.a.createElement("td",null,"12:52")))),r.a.createElement(Rt.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",null,"#"),r.a.createElement("td",null,c.purchase.item),r.a.createElement("td",null,c.purchase.qtyS),r.a.createElement("td",null,c.purchase.price),r.a.createElement("td",null,c.purchase.total))),r.a.createElement("tbody",null,n.map(function(e,t){return i+=e.quantity*e.price,u+=e.quantity,r.a.createElement("tr",{key:t},r.a.createElement("td",null,t+1),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.quantity),r.a.createElement("td",null,e.price),r.a.createElement("td",null,e.quantity*e.price))}))),r.a.createElement(Rt.a,{bordered:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",null,c.purchase.qtyQuan),r.a.createElement("td",null,c.purchase.total))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,u),r.a.createElement("td",null,"".concat(i," ").concat(c.commonInfo.rmb))))),r.a.createElement(Ee.a,{md:2,smOffset:3},r.a.createElement(be.a,{bsStyle:"success",block:!0,onClick:function(){return l()},disabled:o},c.btns.confirm)),r.a.createElement(Ee.a,{md:2,smOffset:2},r.a.createElement(be.a,{bsStyle:"danger",block:!0,onClick:function(){return s()}},c.btns.cancel)))))}),Kt=J(function(e){var t=e.locale,a=e.completed,n=e.refNo;return r.a.createElement("div",null,r.a.createElement(Je.a,{bsStyle:"success"},r.a.createElement(Je.a.Heading,null,r.a.createElement(Je.a.Title,{componentClass:"h2"},t.purchase.success)),r.a.createElement(Je.a.Body,null,t.purchase.purMsg),r.a.createElement(Je.a.Body,null,t.purchase.purRefNo," ",n),r.a.createElement(he.a,null,r.a.createElement(Ee.a,{md:2,smOffset:3},!1),r.a.createElement(Ee.a,{md:2,smOffset:2},!1,r.a.createElement("br",null))),r.a.createElement(be.a,{block:!0,bsStyle:"success",onClick:a},t.btns.continue)))}),Yt=function(e){var t=e.inven,a=e.customer,n=e.refNo;return function(e){e(Jt(t,a,n));var r,l=0;t.forEach(function(t){var a;e((a={id:t._id,data:t.quantity},function(e,t){return e({type:"start_loader"}),fetch("/inventory/decrease",{method:"POST",credentials:"include",mode:"cors",headers:{"Content-Type":"application/json",authorization:t().auth.token},body:JSON.stringify(a)}).then(function(e){return e.json()}).then(function(t){t.err?(t.err.errmsg?e(W(t.err.errmsg,ae)):e(W(t.err,ae)),e({type:"stop_loader"})):(e(It()),e(W("inventory_added",ne)))}).then(function(){e({type:"stop_loader"})}).catch(function(t){e({type:"stop_loader"})})})),l+=t.quantity*t.price}),e((r={id:a._id,data:l},function(e,t){return e({type:"start_loader"}),fetch("/customer/total",{method:"PUT",credentials:"include",mode:"cors",headers:{"Content-Type":"application/json",authorization:t().auth.token},body:JSON.stringify(r)}).then(function(e){return e.json()}).then(function(t){t.err?(e({type:"stop_loader"}),t.err.errmsg?e(W(t.err.errmsg,ae)):e(W(t.err,ae))):e(Et())}).then(function(){e({type:"stop_loader"})}).catch(function(t){e({type:"stop_loader"})})})),e(It())}},Jt=function(e,t,a){return function(n,r){return n({type:"start_loader"}),fetch("/purchases",{method:"POST",credentials:"include",mode:"cors",headers:{"Content-Type":"application/json",authorization:r().staff.token},body:JSON.stringify({inven:e,customer:t,refNo:a,__staff:r().auth.staff._id})}).then(function(e){return e.json()}).then(function(e){e.err?(e.err.errmsg?n(W(e.err.errmsg,ae)):n(W(e.err,ae)),n({type:"stop_loader"})):(n({type:"completed"}),n(W("purchase_placed",ne)))}).then(function(){n({type:"stop_loader"})}).catch(function(e){n({type:"stop_loader"}),n(W(e.errmsg,ae))})}},Xt={stage:0,percent:25,customer:"",selectedItems:[]},Zt=function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(L.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(r)))).state={allCust:[],allInven:[],stage:0,percent:0,customer:"",selectedItems:[],refNo:"",completed:!1},a.increment=function(){return a.setState(function(e){return{stage:e.stage+1,percent:e.percent+33}})},a.decrement=function(){return a.setState(function(e){return{stage:e.stage-1,percent:e.percent-25}})},a.reset=function(){a.props.resetPurchase(),a.setState(Object(G.a)({},Xt))},a.setCustomer=function(e){var t=a.state.allCust.filter(function(t){return t._id===e});a.setState({customer:t[0]})},a.selectItem=function(e,t,n,r){var l=a.state.selectedItems;if(l.find(function(t){return t._id===e})){var s=l.map(function(a){return a._id===e?Object(G.a)({},a,{quantity:parseInt(t),price:parseFloat(n)}):a});a.setState({selectedItems:s.filter(function(e){return e.quantity>0})})}else t>0&&(l.push({_id:e,quantity:parseInt(t),price:parseFloat(n),name:r}),a.setState({selectedItems:l}))},a.disableNext=function(){return""===a.state.customer&&0===a.state.stage||0===a.state.selectedItems.length&&1===a.state.stage},a.confirmOrder=function(){var e=a.state.customer,t=a.state.selectedItems,n=Nt()();a.setState({refNo:n}),a.props.createPurchases({inven:t,customer:e,staff:a.props.staff,refNo:n})},a}return Object(T.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchCustomers(),this.props.fetchInventory()}},{key:"render",value:function(){var e=this.props,t=e.locale,a=e.isLoading;return r.a.createElement(Mt.a,null,r.a.createElement("h3",null,t.purchase.STAGES[this.state.stage]),r.a.createElement("div",{style:{paddingTop:"1vh",paddingBottom:"3vh"}},r.a.createElement(qt.a,{active:!0,now:this.state.percent,label:t.purchase.STAGES[this.state.stage]})),3!==this.state.stage&&r.a.createElement("div",{style:{paddingBottom:"3vh"}},r.a.createElement(he.a,null,r.a.createElement(Ee.a,{xs:2},r.a.createElement(be.a,{bsStyle:"warning",onClick:this.decrement,block:!0,disabled:!(this.state.stage>0)},t.btns.back)),this.state.stage<2&&r.a.createElement(Ee.a,{xs:2},r.a.createElement(be.a,{bsStyle:"primary",onClick:this.increment,block:!0,disabled:this.disableNext()},t.btns.next)),this.state.stage<2&&r.a.createElement(Ee.a,{xs:1,smOffset:6},r.a.createElement(be.a,{bsStyle:"danger",onClick:this.reset,small:"true"},t.btns.clear)))),0===this.state.stage&&r.a.createElement("div",null,r.a.createElement(Ut,{list:this.state.allCust,setCustomer:this.setCustomer,selected:this.state.customer})),1===this.state.stage&&r.a.createElement("div",null,r.a.createElement(Vt,{list:this.state.allInven,selectItem:this.selectItem,compiledList:this.state.selectedItems})),2===this.state.stage&&r.a.createElement("div",null,r.a.createElement(Qt,{disabled:a,cancel:this.reset,confirmOrder:this.confirmOrder,selectedItems:this.state.selectedItems,customer:this.state.customer,staff:this.props.staff})),3===this.state.stage&&r.a.createElement("div",null,r.a.createElement(Kt,{completed:this.reset,refNo:this.state.refNo})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e!==t?!0===e.isComplete.completed?{allInven:e.inventory,allCust:e.customers,stage:3,percent:100}:{allInven:e.inventory,allCust:e.customers,stage:"purchase_placed"===e.message?3:t.stage,percent:"purchase_placed"===e.message?100:t.percent}:t}}]),t}(r.a.Component),$t=Object(c.b)(function(e){return{staff:e.auth.staff,inventory:e.inventory,customers:e.customers,isComplete:e.isComplete,isLoading:e.spinner.isLoading}},function(e){return{fetchCustomers:function(){return e(Et())},fetchInventory:function(){return e(It())},createPurchases:function(t,a,n,r){return e(function(e){return function(t,a){"Dummy Account"===a().auth.staff.name?(t({type:"start_loader"}),setTimeout(function(){t({type:"completed"}),t(W("DEMO_INVENTORY_PURCHASE",ne)),t({type:"stop_loader"})},3e3)):t(Yt(e))}}(t))},resetPurchase:function(){return e({type:"reset"})}}})(J(Zt)),Gt=function(e){function t(){return Object(P.a)(this,t),Object(L.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){return r.a.createElement(x.a,{history:q},r.a.createElement("div",null,r.a.createElement(oe,null),r.a.createElement("div",{className:"container"},r.a.createElement(Ae,null),r.a.createElement(qe,null),r.a.createElement(je,null,r.a.createElement(pe,null)),r.a.createElement(k.a,null,r.a.createElement(U,{path:"/purchase",exact:!0,Component:$t,level:-1}),r.a.createElement(U,{path:"/staff",exact:!0,Component:st,level:3}),r.a.createElement(U,{path:"/customer",exact:!0,Component:bt,level:-1}),r.a.createElement(U,{path:"/inventory",exact:!0,Component:kt,level:-1}),r.a.createElement(U,{path:"/dashboard",exact:!0,Component:Te,level:-1}),r.a.createElement(A.a,{path:"/",exact:!0,component:Le})))))}}]),t}(r.a.Component),Wt=Object(o.e)(Object(o.c)({auth:m,alert:p,staff:h,customers:y,inventory:b,isComplete:g,spinner:O,language:w}),F(),o.a.apply(void 0,D)),ea=document.getElementById("root"),ta=r.a.createElement(c.a,{store:Wt},r.a.createElement(Gt,null));s.a.render(ta,ea)}},[[151,2,1]]]);
//# sourceMappingURL=main.f078ec83.chunk.js.map